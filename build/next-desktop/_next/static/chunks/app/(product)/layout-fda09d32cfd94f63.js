(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4720],{44627:function(e,t,i){Promise.resolve().then(i.bind(i,78435)),Promise.resolve().then(i.bind(i,90344)),Promise.resolve().then(i.bind(i,68638)),Promise.resolve().then(i.bind(i,61308)),Promise.resolve().then(i.bind(i,96355)),Promise.resolve().then(i.bind(i,75174)),Promise.resolve().then(i.bind(i,34575)),Promise.resolve().then(i.t.bind(i,95932,23)),Promise.resolve().then(i.t.bind(i,82333,23)),Promise.resolve().then(i.t.bind(i,70345,23)),Promise.resolve().then(i.t.bind(i,25747,23)),Promise.resolve().then(i.bind(i,75563)),Promise.resolve().then(i.bind(i,24747)),Promise.resolve().then(i.bind(i,77617)),Promise.resolve().then(i.bind(i,29751)),Promise.resolve().then(i.bind(i,48769)),Promise.resolve().then(i.bind(i,80730)),Promise.resolve().then(i.bind(i,76808)),Promise.resolve().then(i.bind(i,98805)),Promise.resolve().then(i.bind(i,96262)),Promise.resolve().then(i.bind(i,25891)),Promise.resolve().then(i.bind(i,71865)),Promise.resolve().then(i.bind(i,58081)),Promise.resolve().then(i.bind(i,17796)),Promise.resolve().then(i.bind(i,52207)),Promise.resolve().then(i.bind(i,95842)),Promise.resolve().then(i.bind(i,52214)),Promise.resolve().then(i.bind(i,27855)),Promise.resolve().then(i.bind(i,6036)),Promise.resolve().then(i.bind(i,66932)),Promise.resolve().then(i.bind(i,61367)),Promise.resolve().then(i.bind(i,47097)),Promise.resolve().then(i.bind(i,45896)),Promise.resolve().then(i.bind(i,48750)),Promise.resolve().then(i.bind(i,46172)),Promise.resolve().then(i.bind(i,23339)),Promise.resolve().then(i.bind(i,95168)),Promise.resolve().then(i.bind(i,39229)),Promise.resolve().then(i.bind(i,1610)),Promise.resolve().then(i.bind(i,57004)),Promise.resolve().then(i.bind(i,24706)),Promise.resolve().then(i.bind(i,82418)),Promise.resolve().then(i.bind(i,32453)),Promise.resolve().then(i.bind(i,28465)),Promise.resolve().then(i.bind(i,98136)),Promise.resolve().then(i.bind(i,11478)),Promise.resolve().then(i.bind(i,81282)),Promise.resolve().then(i.bind(i,45656)),Promise.resolve().then(i.bind(i,26265)),Promise.resolve().then(i.bind(i,1918)),Promise.resolve().then(i.bind(i,86185)),Promise.resolve().then(i.bind(i,53457)),Promise.resolve().then(i.bind(i,12670)),Promise.resolve().then(i.bind(i,14581)),Promise.resolve().then(i.bind(i,96437)),Promise.resolve().then(i.bind(i,15527)),Promise.resolve().then(i.bind(i,45015)),Promise.resolve().then(i.bind(i,94834)),Promise.resolve().then(i.bind(i,62923)),Promise.resolve().then(i.bind(i,62738)),Promise.resolve().then(i.bind(i,80366)),Promise.resolve().then(i.bind(i,75527)),Promise.resolve().then(i.bind(i,76293)),Promise.resolve().then(i.bind(i,21304)),Promise.resolve().then(i.bind(i,75707)),Promise.resolve().then(i.bind(i,83622)),Promise.resolve().then(i.bind(i,31937)),Promise.resolve().then(i.bind(i,29371)),Promise.resolve().then(i.bind(i,48471)),Promise.resolve().then(i.bind(i,19976)),Promise.resolve().then(i.bind(i,27619)),Promise.resolve().then(i.bind(i,71615)),Promise.resolve().then(i.t.bind(i,35563,23)),Promise.resolve().then(i.t.bind(i,11800,23)),Promise.resolve().then(i.t.bind(i,2179,23)),Promise.resolve().then(i.t.bind(i,59793,23)),Promise.resolve().then(i.t.bind(i,79423,23)),Promise.resolve().then(i.t.bind(i,7881,23)),Promise.resolve().then(i.t.bind(i,58610,23)),Promise.resolve().then(i.t.bind(i,83573,23))},80366:function(e,t,i){"use strict";i.r(t),i.d(t,{AnalyticsProvider:function(){return L}});var s,a,r,n,o,l,u,d,c,h,E,m,A,p,g,v,P,T,N=i(8759),S=i(99616);class y{makeParams(){return{}}}class _{makeParams(){return{}}}class b{evgen;constructor(e,t,i){this.evgen={trackEvent:(s,a)=>{let r={...a,...t.getGlobalParams(),...i.getPlatformParams()};e.trackEvent(s,r)}}}sendEvent(e,t){this.evgen.trackEvent(e,t)}}(s=h||(h={})).AlbumScreen="album_screen",s.ArtistScreen="artist_screen",s.PlaylistScreen="playlist_screen",s.PodcastLandingScreen="podcast_landing_screen",s.Link="link",(a=E||(E={})).AlbumScreen="album_screen",a.ArtistScreen="artist_screen",a.PlaylistScreen="playlist_screen",a.NewReleasesTabScreen="new_releases_tab_screen",(r=m||(m={})).PlaylistScreen="playlist_screen",r.PlaylistListScreen="playlist_list_screen",(n=A||(A={})).AlbumScreen="album_screen",n.ArtistScreen="artist_screen",n.TrackListScreen="track_list_screen",n.ChartTabScreen="chart_tab_screen",(o=p||(p={})).PlaylistScreen="playlist_screen",o.AlbumScreen="album_screen",o.CompilationsScreen="compilations_screen",o.ArtistScreen="artist_screen",(l=g||(g={})).PlaylistScreen="playlist_screen",l.PlaylistListScreen="playlist_list_screen",l.AlbumScreen="album_screen",l.AlbumListScreen="album_list_screen",l.MixesTabScreen="mixes_tab_screen",(u=v||(v={})).AlbumScreen="album_screen",u.ArtistScreen="artist_screen",u.PlaylistScreen="playlist_screen",(d=P||(P={})).AlbumScreen="album_screen",d.ArtistScreen="artist_screen",(c=T||(T={})).AlbumScreen="album_screen",c.PlaylistScreen="playlist_screen",c.GenreScreen="genre_screen";var f=i(27951);let V=null,L=e=>{let{children:t}=e,i=(0,f.sv)(),s=(0,f.wL)(),a=(0,S.useMemo)(()=>{if(!i.isLoaded)return null;if(V)return V;let e=function(e,t,i){let s=function({callback:e,maxSendingItemsPerRequest:t,requestsSendingDelay:i}){let s=[];return!function a(){if(s.length>0){let i=s.splice(0,t);e(i)}window.setTimeout(a,i)}(),{add(e){s.push(e)}}}({callback:t=>{e(t)},requestsSendingDelay:1e3,maxSendingItemsPerRequest:21});return{trackEvent(e,a){i&&t.log(e,a),s.add({[e]:a})}}}(e=>i.count(e,"evgen"),s,!1),t=function(){let e=new y;return{getGlobalParams:()=>e}}(),a=function(){let e=new _;return{getPlatformParams:()=>e}}();return V=new b(e,t,a)},[i,s]);return(0,N.jsx)(f.fC.Provider,{value:a,children:t})}},75527:function(e,t,i){"use strict";i.r(t),i.d(t,{AuthorizationProvider:function(){return r}});var s=i(33423),a=i(27951);let r=(0,s.Pi)(e=>{var t,i;let{children:s,host:r}=e,n=(0,a.uK)(),{user:o}=(0,a.oR)(),l=n.get(a.xi),{pathname:u,host:d,searchParams:c,tld:h}=(0,a.wG)();return l.setRedirectUrl({pathname:u,searchParams:c,host:d,tld:h}),null===(i=l.setTokenOwnerLogin)||void 0===i||i.call(l,null===(t=o.account)||void 0===t?void 0:t.login),l.check(),s})},76293:function(e,t,i){"use strict";i.r(t),i.d(t,{BlackboxProvider:function(){return s}}),i(99616),i(27951);let s=e=>{let{children:t,host:i,userIp:s}=e;return t}},62738:function(e,t,i){"use strict";i.r(t),i.d(t,{ContainerProvider:function(){return n}});var s=i(8759),a=i(99616),r=i(27951);let n=e=>{let{children:t,hostTld:i,env:n}=e,o=(0,a.use)((0,r.ZO)(i,n));return(0,s.jsx)(r.Xl.Provider,{value:o,children:t})}},21304:function(e,t,i){"use strict";i.r(t),i.d(t,{DesktopProvider:function(){return E}});var s=i(8759),a=i(35338),r=i(99616),n=i(65244),o=i(48769),l=i(27951),u=i(71865);let d=(e,t)=>{var i;let a=null;null===(i=window.desktopEvents)||void 0===i||i.on(l.BO.ON_UPDATE_AVAILABLE,(i,r)=>{a!==r&&(a=r,t((0,s.jsx)(u.NotificationUpdate,{formatMessage:e,version:r}),{containerId:l.W$.APPLICATION_UPDATE}))})},c=(e,t)=>{d(e,t)},h=()=>{var e;null===(e=window.desktopEvents)||void 0===e||e.send(l.BO.ON_APPLICATION_READY)};i(46971),i(58081);let E=e=>{let{children:t}=e,i=(0,l.Xf)();{let{formatMessage:e}=(0,n.Z)(),{notify:t}=(0,l.d$)();(0,r.useEffect)(()=>{h()},[]),(0,r.useEffect)(()=>{c(e,t)},[t,e])}return(0,s.jsxs)(s.Fragment,{children:[t,(0,s.jsx)(o.Notification,{className:(0,a.W)({updateNotificationContainer:!0,updateNotificationContainer_application_windows:i===l.t4.WINDOWS,updateNotificationContainer_application_macos:i===l.t4.MACOS}),enableMultiContainer:!0,containerId:l.W$.APPLICATION_UPDATE,position:"top-center"})]})}},83622:function(e,t,i){"use strict";i.r(t),i.d(t,{HistoryProvider:function(){return l}});var s=i(8759),a=i(11769),r=i(99616),n=i(27951);let o=null,l=e=>{let{children:t}=e,i=(0,n.uK)(),l=(0,a.useRouter)(),[u,d]=(0,r.useState)(!1),[c,h]=(0,r.useState)(!1),[E,m]=(0,r.useState)(null),A=(0,r.useMemo)(()=>{if(o)return o;let e=i.get(n.Ar);return o=new n.QQ(e)},[i]),p=(0,r.useCallback)(()=>{A&&(d(A.canBack),h(A.canForward),m(A.state))},[A]),g=(0,r.useCallback)(e=>{A&&(A.replaceState(e),l.replace(e.href))},[A,l]),v=(0,r.useCallback)(e=>{A&&(A.pushState(e),p())},[A,p]),P=(0,r.useCallback)(()=>{A&&(A.back(),p(),l.back())},[A,l,p]),T=(0,r.useCallback)(()=>{A&&(A.forward(),p(),l.forward())},[A,l,p]);return(0,s.jsx)(n.Tl.Provider,{value:{pushState:v,replaceState:g,canForward:c,canBack:u,back:P,forward:T,state:E},children:t})}},75707:function(e,t,i){"use strict";i.r(t),i.d(t,{LayoutProvider:function(){return u},setClientSideLayout:function(){return l}});var s=i(8759),a=i(57285),r=i(33423),n=i(99616),o=i(27951);let l=e=>{document.body.classList.remove("desktop"),e.setLayout((0,o.jP)(window.innerWidth))},u=(0,r.Pi)(e=>{let{children:t,userAgent:i,clientTld:r}=e,{settings:u}=(0,o.oR)(),[d,c]=(0,n.useState)(null),h=(0,o.Xf)();u.setClientTld(r),h&&u.setPlatform(h),u.layout;let E=o.Q2.Dark,m=(0,n.useMemo)(()=>(0,a.Z)(()=>{l(u)},100),[u]);(0,n.useLayoutEffect)(()=>{l(u)},[u]),(0,n.useEffect)(()=>(window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}),[m]);let A=(0,n.useCallback)(e=>{c(e)},[]),p=(0,n.useMemo)(()=>({theme:E,colorScheme:"dark",setTheme:()=>{},contentRef:d,setContentRef:A}),[d,A,E]);return(0,s.jsx)(o.VY.Provider,{value:p,children:t})})},29371:function(e,t,i){"use strict";i.r(t),i.d(t,{PrefetchDataProvider:function(){return l}});var s=i(33423),a=i(99616),r=i(27951),n=i(75707);let o=async(e,t)=>{let{user:i,library:s,experiments:a,slides:r}=e,n=t?i.getAbout:i.setUnauthorized;await Promise.all([n(),a.getData()]),i.isAuthorized&&await Promise.all([i.getSettings(),s.getData(),r.getUserSlides()])},l=(0,s.Pi)(e=>{let{children:t}=e,i=(0,r.oR)(),s=(0,r.uK)(),l=s.get(r.xi),u=l.hasAuthorizationCredentials;return(0,n.setClientSideLayout)(i.settings),i.user.account.loadingState===r.Gu.IDLE&&(0,a.use)(o(i,u)),t})},31937:function(e,t,i){"use strict";i.r(t),i.d(t,{SonataProvider:function(){return J}});var s,a,r=i(8759),n=i(33423),o=i(99616);class l{listeners={};muted=!1;on(e,t){let i=this.listeners[e];i?this.listeners[e]=[...i,t]:this.listeners[e]=[t]}off(e,t){if(!this.listeners[e])return;if(!t){delete this.listeners[e];return}let i=this.listeners[e];if(i){for(let s=0,a=i.length;s<a;s++)if(i[s]===t){i.splice(s,1),i.length||delete this.listeners[e];break}}}clearListeners(){for(let e in this.listeners)Object.prototype.hasOwnProperty.call(this.listeners,e)&&delete this.listeners[e]}trigger(e,...t){if(this.muted||(t=[].slice.call(arguments,1),!this.listeners[e]))return;let i=this.listeners[e];if(i)for(let e=0,s=i.length;e<s;e++){let s=i[e];s&&s(...t)}}muteEvents(){this.muted=!0}unmuteEvents(){this.muted=!1}}let u={audio:{retry:3}};class d extends Error{constructor(e){super(e),this.name="AudioError"}}let c={NO_IMPLEMENTATION:"cannot find suitable implementation",NOT_PRELOADED:"track is not preloaded",BAD_STATE:"action is not permited from current state"},h={EVENT_PLAY:"play",EVENT_OUTER_PLAY:"outerplay",EVENT_STOP:"stop",EVENT_PAUSE:"pause",EVENT_RESUME:"resume",EVENT_OUTER_PAUSE:"outerpause",EVENT_PROGRESS:"progress",EVENT_POSITION:"position",EVENT_LOADING:"loading",EVENT_LOADED:"loaded",EVENT_VOLUME:"volumechange",EVENT_SPEED:"ratechange",EVENT_ENDED:"ended",EVENT_CRASHED:"crashed",EVENT_ERROR:"error",HLS_EVENT_ERROR:"hlserror",EVENT_DESTROY:"destroy",EVENT_STATE:"state",EVENT_SWAP:"swap",PRELOADER_EVENT:"preloader:",STATE_INIT:"init",STATE_CRASHED:"crashed",STATE_IDLE:"idle",STATE_PLAYING:"playing",STATE_PAUSED:"paused"};var E=i(87927);let m={updateInterval:30,EMPTY_SOUND:"data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAADAAAC2QBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA8TEFNRTMuOThyBK8AAAAAAAAAADQgJAimTQABzAAAAtmIVtmVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQZAAO4AAAf4AAAAgAAA/wAAABAoQDLmAAACBYgGYMAAAE+oH///////0WKFRVzjKnAmjp+XX9qP//////p0USaKtMwpjZNhNFyEM61QAAOAP////////nfSpMQU1FMy45OC4yqqr/+xBEDI/wAAB/gAAACAxgGaMAAAEAAAH+AAAAIAAAP8AAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7EGQoD/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",EVENT_NATIVE_PLAY:"play",EVENT_NATIVE_PAUSE:"pause",EVENT_NATIVE_TIMEUPDATE:"timeupdate",EVENT_NATIVE_ENDED:"ended",EVENT_NATIVE_DURATION:"durationchange",EVENT_NATIVE_LOADING:"progress",EVENT_NATIVE_META:"loadedmetadata",EVENT_NATIVE_CANPLAY:"canplay",EVENT_NATIVE_ERROR:"error",promiseLoadedEvents:["progress"],promisePlayingEvents:["timeupdate"],promiseMetadataEvents:["loadedmetadata","canplay"]};class A extends Error{src;constructor(e,t){super(e),this.src=t,this.name="PlaybackError"}}let p={CONNECTION_ABORTED:"Connection aborted",NETWORK_ERROR:"Network error",DECODE_ERROR:"Decode error",BAD_DATA:"Bad data",DONT_START:"Playback start error"},g={1:p.CONNECTION_ABORTED,2:p.NETWORK_ERROR,3:p.DECODE_ERROR,4:p.BAD_DATA};class v{isOnlyDeviceVolume(){let e=!0;try{let t=document.createElement("audio");t.volume=.63,e=Math.abs(t.volume-.63)>.01}catch(t){e=!0}return e}parseParams(e){let t=e.split("?")[1];return t&&t.length?t.split("&").reduce(function(e,t){let i=t.split("="),s=i[0],a=i[1];return s&&a&&(e[s]=a),e},{}):{}}updateUrl(e,t){let i=this.parseParams(e),s="";for(let e in Object.assign(i,t),i)Object.prototype.hasOwnProperty.call(i,e)&&(s+=`${e}=${i[e]}`);return e+(s?`?${s}`:"")}getCookie(e){let t=document.cookie.split(";").reduce((e,t)=>{let[i,s]=t.trim().split("=");return i&&s?{...e,[i]:s}:e},{})[e];return t||""}}let P=1;class T{browser=new v;emitter=new l;src="";position=0;lastGoodTime=0;lastUpdate=0;notLoading=!0;output=null;shouldUseHlsPlayer;skipEmptySound;audio=null;shouldPause=!1;shouldPlay=!1;playing=!1;ended=!1;promiseMode=!1;isHlsTrack=!1;promises={};audioContext=null;loaderTimer=null;promiseCheckTO=null;retry=0;clearInitListener=null;clearNativePauseListener=null;hls=null;isAutoplayable=!1;name=P++;whenReady;constructor(e,t){this.shouldUseHlsPlayer=e,this.skipEmptySound=t,t&&(this.src=m.EMPTY_SOUND),this.startupAudio=this.startupAudio.bind(this),this.updateProgress=this.updateProgress.bind(this),this.onNativeLoading=this.onNativeLoading.bind(this),this.onNativeEnded=this.onNativeEnded.bind(this),this.onNativeError=this.onNativeError.bind(this),this.onNativePause=this.onNativePause.bind(this),this.onNativePlay=this.onNativePlay.bind(this),this.whenReady=this.init()}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}trigger(e,...t){this.emitter.trigger(e,...t)}muteEvents(){this.emitter.muteEvents()}unmuteEvents(){this.emitter.unmuteEvents()}updateProgress(){let e=Number(new Date);e-this.lastUpdate<m.updateInterval||(this.audio&&this.audio.currentTime&&(this.lastGoodTime=this.audio.currentTime),this.lastUpdate=e,this.trigger(h.EVENT_PROGRESS))}onNativeLoading(){if(this.updateProgress(),this.audio&&this.audio.buffered.length){let e=this.audio.buffered.end(0)-this.audio.buffered.start(0);this.notLoading&&e&&(this.notLoading=!1,this.trigger(h.EVENT_LOADING)),e>=this.audio.duration-.1&&this.trigger(h.EVENT_LOADED)}}onNativeEnded(){this.trigger(h.EVENT_PROGRESS),this.ended=!0,this.playing=!1,this.shouldPause=!0,this.audio&&this.audio.pause(),this.trigger(h.EVENT_ENDED)}onNativeError(e){let t;if(this.src&&this.src!==m.EMPTY_SOUND){if(this.audio&&this.audio.error&&2===this.audio.error.code){console.warn("Network error. Restarting...",this.src),this.position=this.lastGoodTime,this.restart(`audioError code:${this.audio.error.code}`);return}if(this.audio&&this.audio.error){let e=g[String(this.audio.error.code)];t=new A(e||"onNativeError",this.src)}else t=new A(e instanceof Error?e.message:"onNativeError",this.src);this.playing=!1,this.trigger(h.EVENT_ERROR,t)}}onNativePause(){if(this.audio&&!this.shouldPause&&this.audio.currentTime!==this.audio.duration){this.trigger(h.EVENT_OUTER_PAUSE);return}this.audio&&!this.audio.ended&&this.trigger(h.EVENT_PAUSE),this.shouldPause=!1}onNativePlay(){if(!this.shouldPlay){this.shouldPause=!0,this.pause(),this.trigger(h.EVENT_OUTER_PLAY);return}this.trigger(h.EVENT_PLAY),this.shouldPlay=!1}initUserEvents(){document.body.addEventListener("mousedown",this.startupAudio,!0),document.body.addEventListener("keydown",this.startupAudio,!0),document.body.addEventListener("touchstart",this.startupAudio,!0)}deinitUserEvents(){document.body.removeEventListener("mousedown",this.startupAudio,!0),document.body.removeEventListener("keydown",this.startupAudio,!0),document.body.removeEventListener("touchstart",this.startupAudio,!0)}initNativeEvents(){this.audio&&(this.audio.addEventListener(m.EVENT_NATIVE_PAUSE,this.onNativePause),this.audio.addEventListener(m.EVENT_NATIVE_PLAY,this.onNativePlay),this.audio.addEventListener(m.EVENT_NATIVE_ENDED,this.onNativeEnded),this.audio.addEventListener(m.EVENT_NATIVE_TIMEUPDATE,this.updateProgress),this.audio.addEventListener(m.EVENT_NATIVE_DURATION,this.updateProgress),this.audio.addEventListener(m.EVENT_NATIVE_LOADING,this.onNativeLoading),this.audio.addEventListener(m.EVENT_NATIVE_ERROR,this.onNativeError))}initHlsEvents(){this.hls&&this.hls.on(E.Z.Events.ERROR,(e,t)=>{this.hls&&this.hls.destroy(),this.playing=!1,this.trigger(h.HLS_EVENT_ERROR,t)})}deinitNativeEvents(){this.audio&&(this.audio.removeEventListener(m.EVENT_NATIVE_PAUSE,this.onNativePause),this.audio.removeEventListener(m.EVENT_NATIVE_PLAY,this.onNativePlay),this.audio.removeEventListener(m.EVENT_NATIVE_ENDED,this.onNativeEnded),this.audio.removeEventListener(m.EVENT_NATIVE_TIMEUPDATE,this.updateProgress),this.audio.removeEventListener(m.EVENT_NATIVE_DURATION,this.updateProgress),this.audio.removeEventListener(m.EVENT_NATIVE_LOADING,this.onNativeLoading),this.audio.removeEventListener(m.EVENT_NATIVE_ERROR,this.onNativeError))}init(){return new Promise((e,t)=>{this.muteEvents(),this.shouldUseHlsPlayer?this.hls?e():this.initHls().then(e).catch(t):(this.initAudioElement(),this.initEvents().then(e).catch(t))})}initHls(){return new Promise((e,t)=>{this.initAudioElement(),this.initEvents().then(()=>{this.hls=new E.Z.default({liveDurationInfinity:!0,maxBufferSize:3e6}),this.audio&&this.hls.attachMedia(this.audio),this.hls.on(E.Z.Events.MEDIA_ATTACHED,e),this.hls.on(E.Z.Events.ERROR,(e,t)=>{if(t.fatal&&this.hls)switch(t.type){case E.Z.ErrorTypes.NETWORK_ERROR:this.hls.startLoad();break;case E.Z.ErrorTypes.MEDIA_ERROR:this.hls.recoverMediaError();break;default:this.hls.destroy(),this.trigger(h.EVENT_DESTROY)}}),this.hls.on(E.Z.Events.DESTROYING,()=>{this.hls=null}),setTimeout(()=>{t(Error("Time for the init HLS is over"))},3e3)}).catch(t)})}initEvents(){return new Promise((e,t)=>{this.initUserEvents(),this.initNativeEvents(),this.initAndCheckAutoplay().then(e).catch(t)})}initAudioElement(){this.audio=document.createElement("audio"),this.audio.loop=!1,this.audio.preload="auto",this.audio.autoplay=!1,this.skipEmptySound||(this.audio.src=m.EMPTY_SOUND)}startupAudio(){this.audioContext&&this.audioContext.resume(),this.deinitUserEvents();let e=()=>{this.shouldPlay=!1,this.unmuteEvents(),this.isAutoplayable=!0},t=e=>{this.shouldPlay=!1,this.unmuteEvents(),console.info(`_startupAudio:failReason:${e||""}`)},i=()=>{if(this.audio&&(this.audio.removeEventListener(m.EVENT_NATIVE_PLAY,i),this.audio.removeEventListener(m.EVENT_NATIVE_CANPLAY,i),this.audio.removeEventListener(m.EVENT_NATIVE_META,i),this.audio.removeEventListener(m.EVENT_NATIVE_ERROR,i)),this.promiseMode)return;let t=()=>{this.audio&&this.audio.removeEventListener(m.EVENT_NATIVE_PAUSE,t),e()};this.clearNativePauseListener=()=>{this.audio&&this.audio.addEventListener(m.EVENT_NATIVE_PAUSE,t)},this.audio&&(this.audio.addEventListener(m.EVENT_NATIVE_PAUSE,t),this.audio.pause(),this.shouldPause=!0)};this.clearInitListener=()=>{this.audio&&(this.audio.removeEventListener(m.EVENT_NATIVE_PLAY,i),this.audio.removeEventListener(m.EVENT_NATIVE_CANPLAY,i),this.audio.removeEventListener(m.EVENT_NATIVE_META,i),this.audio.removeEventListener(m.EVENT_NATIVE_ERROR,i))},this.audio&&(this.audio.addEventListener(m.EVENT_NATIVE_PLAY,i),this.audio.addEventListener(m.EVENT_NATIVE_CANPLAY,i),this.audio.addEventListener(m.EVENT_NATIVE_META,i),this.audio.addEventListener(m.EVENT_NATIVE_ERROR,i),this.audio.load(),this.shouldPlay=!0,this.promiseMode=!0,this.audio.play().then(()=>{e(),this.shouldPause=!0,this.shouldPlay=!1,this.audio&&this.audio.pause()}).catch(()=>{this.shouldPause=!0,this.shouldPlay=!1,t("audio.play")}))}initAndCheckAutoplay(){return new Promise(e=>{this.skipEmptySound&&(this.isAutoplayable=!0,e());let t=()=>{this.shouldPlay=!1,this.isAutoplayable=!0,e()},i=t=>{this.shouldPlay=!1,this.isAutoplayable=!1,console.info(this,`initAndCheckAutoplay:failReason:${t||""}`),e()},s=e=>{if(this.audio&&(this.audio.removeEventListener(m.EVENT_NATIVE_PLAY,s),this.audio.removeEventListener(m.EVENT_NATIVE_CANPLAY,s),this.audio.removeEventListener(m.EVENT_NATIVE_META,s),this.audio.removeEventListener(m.EVENT_NATIVE_ERROR,s)),this.promiseMode)return;if(e.type===m.EVENT_NATIVE_ERROR||e.type===m.EVENT_NATIVE_META){i(e.type);return}let a=e=>{if(e.type===m.EVENT_NATIVE_ERROR){i(e.type);return}this.audio&&this.audio.removeEventListener(m.EVENT_NATIVE_PAUSE,a),t()};this.audio&&(this.audio.addEventListener(m.EVENT_NATIVE_PAUSE,a),this.audio.pause()),this.shouldPause=!0};this.audio&&(this.audio.addEventListener(m.EVENT_NATIVE_PLAY,s),this.audio.addEventListener(m.EVENT_NATIVE_CANPLAY,s),this.audio.addEventListener(m.EVENT_NATIVE_META,s),this.audio.addEventListener(m.EVENT_NATIVE_ERROR,s),this.audio.src=m.EMPTY_SOUND,this.audio.load(),this.shouldPlay=!0,this.promiseMode=!0,this.audio.play().then(()=>{t(),this.shouldPause=!0,this.shouldPlay=!1,this.audio&&this.audio.pause()}).catch(()=>{this.shouldPause=!0,this.shouldPlay=!1,i("audio.play")}))})}breakStartup(e){this.deinitUserEvents(),this.unmuteEvents(),this.clearInitListener&&this.clearInitListener(),this.clearNativePauseListener&&this.clearNativePauseListener(),console.warn("_startupAudio:interrupted",e)}waitFor(e,t,i){let s;let a=this.promises[e];if(a)s=a.promise();else{let a=()=>{},r=[new Promise((e,t)=>{a=t})],n={},o=e=>new Promise(i=>{let s=()=>{t()&&i()};this.audio&&(this.audio.addEventListener(e,s),n[e]=s)}),l=()=>{for(let e of Object.keys(n))if(this.audio){let t=n[e];t&&this.audio.removeEventListener(e,t)}};for(let e of i)r.push(o(e));let u=Promise.race(r);u.then(l).catch(l),this.promises[e]={promise:()=>u,reject:a},s=u}return s}cancelWait(e,t){let i;(i=this.promises[e])&&(delete this.promises[e],i.reject(t))}abortPromises(e){for(let t in this.promises)Object.prototype.hasOwnProperty.call(this.promises,t)&&this.cancelWait(t,e)}promiseMetadataCheck(){return!!this.audio&&this.audio.readyState>this.audio.HAVE_METADATA}promiseMetadata(){return this.waitFor("metadata",()=>this.promiseMetadataCheck(),m.promiseMetadataEvents)}promiseLoadedCheck(){if(this.loaderTimer?clearTimeout(this.loaderTimer):this.loaderTimer=setTimeout(()=>{this.cancelWait("loaded","timeout")},5e3),this.audio){let e=Math.min(this.position+45,this.audio.duration),t=this.audio.buffered.end(0)-this.audio.buffered.start(0);return 0!==this.audio.buffered.length&&t>=e}return!1}promiseLoaded(){let e=this.waitFor("loaded",()=>this.promiseLoadedCheck(),m.promiseLoadedEvents),t=()=>{this.loaderTimer&&clearTimeout(this.loaderTimer)};return e.then(t).catch(t),e}promisePlayingCheck(){if(this.audio){let e=Math.min(this.position+.2,this.audio.duration);return this.promiseCheckTO&&clearTimeout(this.promiseCheckTO),0!==this.audio.currentTime||this.audio.paused||(this.promiseCheckTO=setTimeout(()=>{this.audio&&0===this.audio.currentTime&&!this.audio.paused&&(this.audio.currentTime=1)},1e3)),this.audio.currentTime>=e}return!1}promisePlaying(){return this.waitFor("playing",()=>this.promisePlayingCheck(),m.promisePlayingEvents)}promiseStartPlaying(){let e,t=!1;if(this.promises.startPlaying)e=this.promises.startPlaying.promise();else{let i,s=()=>{},a=new Promise((e,a)=>{this.promisePlaying().then(()=>{t=!0,clearTimeout(i),e()}).catch(e=>{t=!0,clearTimeout(i),this.cancelWait("startPlaying",e)}),this.promiseLoaded().then(()=>{t||(i=setTimeout(()=>{a("timeout"),this.cancelWait("playing","timeout"),console.warn("startPlaying:failed")},5e3))}).catch(e=>{t=!0,clearTimeout(i),this.cancelWait("startPlaying",e)}),s=a});this.promises.startPlaying={promise:()=>a,reject:s},e=this.promises.startPlaying.promise()}return e}load(e){if(this.abortPromises("load"),this.breakStartup("load"),this.ended=!1,this.playing=!1,this.notLoading=!0,this.position=0,this.lastGoodTime=0,this.src=e,/\.m3u8$/.test(e)&&this.hls&&this.audio){this.isHlsTrack=!0;let t=`${this.browser.getCookie("device_id")}0${Date.now().toString(16)}${Date.now().toString(16)}`,i=this.browser.updateUrl(e,{vsid:t});this.hls.destroy(),this.hls=new E.Z.default({liveDurationInfinity:!0,maxBufferSize:3e6}),this.initHlsEvents(),this.hls.loadSource(i),this.hls.attachMedia(this.audio),this.audio.load()}else this.audio&&(this.isHlsTrack=!1,this.audio.src=e,this.audio.load())}stop(){this.abortPromises("stop"),this.breakStartup("stop"),this.load(""),this.isHlsTrack&&this.hls&&this.hls.stopLoad()}startPlay(){this.audio&&(this.audio.currentTime=this.position),this.playing&&(this.breakStartup("startPlay"),this.shouldPlay=!0,this.audio&&this.audio.play().catch(e=>{console.error(e)}),this.hls&&this.hls.startLoad(),this.promiseStartPlaying().then(()=>{this.retry=0}).catch(()=>this.restart("")))}restart(e){if(!this.src||this.src===m.EMPTY_SOUND||e&&"timeout"!==e)return;if(this.retry++,this.retry>5){this.playing=!1,this.trigger(h.EVENT_ERROR,new A(p.DONT_START,this.src));return}let t=this.position,i=this.playing;this.load(this.src),i?this.loadMetadata(t):this.setPosition(t)}play(e){this.retry=0,this.loadMetadata(e)}loadMetadata(e){this.playing||(this.breakStartup("play"),this.ended=!1,this.playing=!0,null!=e&&(this.position=e),this.promiseMetadata().then(()=>this.startPlay()).catch(e=>{console.error(e)}))}pause(){this.shouldPause=!0,this.playing=!1,this.cancelWait("startPlaying","pause"),this.breakStartup("pause"),this.isHlsTrack&&this.hls&&this.hls.stopLoad(),this.audio&&(this.audio.pause(),this.position=this.audio.currentTime)}setPosition(e){if(!isFinite(e)){console.warn("setPositionFailed",e);return}this.position=e,this.promiseMetadata().then(()=>{this.audio&&(this.audio.currentTime=this.position)})}toggleCrossDomain(e){e&&this.audio?this.audio.crossOrigin="anonymous":this.audio&&this.audio.removeAttribute("crossOrigin"),this.restart("toggleCrossDomain")}createSource(e){if(this.audioContext=e,this.output)return;let t=!1;this.audio&&(t=!this.audio.crossOrigin,this.audio.crossOrigin="anonymous",this.output=e.createMediaElementSource(this.audio),this.output.connect(e.destination)),t&&this.restart("crossOrigin")}destroy(){this.audio&&(this.shouldPause=!0,this.audio.pause(),this.deinitNativeEvents()),this.output&&(this.output.disconnect(),this.output=null),this.abortPromises("destroy"),this.muteEvents(),this.deinitUserEvents(),this.promises={},this.audio=null}get currentTime(){return this.audio?this.audio.currentTime:null}get duration(){return this.audio?this.audio.duration:null}get loaded(){let e;if(this.audio&&this.audio.buffered.length){let t=this.audio.buffered.length-1;e=this.audio.buffered.end(t)}else e=null;return e}get volumeLevel(){return this.audio?this.audio.volume:0}set volumeLevel(e){this.audio&&(this.audio.volume=e)}get outputAudioNode(){return this.output}set defaultPlaybackRate(e){this.audio&&(this.audio.defaultPlaybackRate=e)}set playbackRate(e){this.audio&&(this.audio.playbackRate=e)}get audioSrc(){return this.src}get audioNotLoading(){return this.notLoading}get autoplayable(){return this.isAutoplayable}}let N=1;class S{browser=new v;emitter=new l;audioContext;webAudioApi=!1;activeLoader=0;volume=1;speed=1;loaders=[];audioOutput=null;preprocessor=null;skipEmptySound;name=N++;type="html5";whenReady;constructor(e,t,i){this.audioContext=e,this.whenReady=this.init(t),this.skipEmptySound=i,this.setActive(0)}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}trigger(e,...t){this.emitter.trigger(e,...t)}init(e){this.addLoader(e),this.addLoader(e);let t=this.loaders.map(e=>e.whenReady);return Promise.all(t)}addLoader(e){let t=new T(e,this.skipEmptySound);this.loaders.push(t),this.subscribeLoaderEvents(t),this.webAudioApi&&this.audioContext&&t.createSource(this.audioContext)}subscribeLoaderEvents(e){let t=this.loaders.length-1,i=(e,...i)=>{let s=(this.loaders.length+t-this.activeLoader)%this.loaders.length;this.trigger(e,s,...i)};e.on(h.EVENT_PROGRESS,(...e)=>i(h.EVENT_PROGRESS,...e)),e.on(h.EVENT_LOADING,(...e)=>i(h.EVENT_LOADING,...e)),e.on(h.EVENT_LOADED,(...e)=>i(h.EVENT_LOADED,...e)),e.on(h.EVENT_ENDED,(...e)=>i(h.EVENT_ENDED,...e)),e.on(h.EVENT_ERROR,(...e)=>i(h.EVENT_ERROR,...e)),e.on(h.EVENT_OUTER_PAUSE,(...e)=>i(h.EVENT_OUTER_PAUSE,...e)),e.on(h.EVENT_PAUSE,(...e)=>i(h.EVENT_PAUSE,...e)),e.on(h.EVENT_OUTER_PLAY,(...e)=>i(h.EVENT_OUTER_PLAY,...e)),e.on(h.EVENT_PLAY,(...e)=>i(h.EVENT_PLAY,...e)),e.on(h.HLS_EVENT_ERROR,(...e)=>i(h.HLS_EVENT_ERROR,...e)),e.on(h.EVENT_DESTROY,(...e)=>i(h.EVENT_DESTROY,...e))}setActive(e){this.activeLoader=(this.activeLoader+e)%this.loaders.length,this.trigger(h.EVENT_SWAP,e),0!==e&&this.stop(e)}getLoader(e=0){let t=this.loaders;return t[(this.activeLoader+e)%t.length]}toggleCrossDomain(e){this.loaders.forEach(t=>{t.toggleCrossDomain(e)})}toggleWebAudioAPI(e){let t;return this.webAudioApi===e?e:(this.audioContext?(e?(this.audioOutput=this.audioContext.createGain(),this.audioOutput.gain.value=this.volume,this.preprocessor?(this.audioOutput.connect(this.preprocessor.biquadFilterInput),this.preprocessor.biquadFilterOutput&&this.preprocessor.biquadFilterOutput.connect(this.audioContext.destination)):this.audioOutput.connect(this.audioContext.destination),this.loaders.forEach(e=>{e.volumeLevel=1,this.audioContext&&e.createSource(this.audioContext),e.outputAudioNode&&(e.outputAudioNode.disconnect(),this.audioOutput&&e.outputAudioNode.connect(this.audioOutput))}),this.audioContext.resume()):this.audioOutput&&(this.preprocessor&&this.preprocessor.biquadFilterOutput&&this.preprocessor.biquadFilterOutput.disconnect(),this.audioOutput.disconnect(),this.audioOutput=null,this.loaders.forEach(e=>{e.volumeLevel=this.volume,e.outputAudioNode&&(e.outputAudioNode.disconnect(),this.audioContext&&e.outputAudioNode.connect(this.audioContext.destination))})),this.webAudioApi=e,t=e):(console.warn("toggleWebAudioAPIError",e),t=!1),t)}setAudioPreprocessor(e){return this.webAudioApi?this.preprocessor===e||(this.preprocessor&&this.preprocessor.biquadFilterOutput&&this.preprocessor.biquadFilterOutput.disconnect(),this.preprocessor=e,this.preprocessor?(this.loaders.forEach(()=>{this.audioOutput&&this.preprocessor&&(this.audioOutput.disconnect(),this.audioOutput.connect(this.preprocessor.biquadFilterInput))}),this.preprocessor.biquadFilterOutput&&this.audioContext&&this.preprocessor.biquadFilterOutput.connect(this.audioContext.destination)):this.loaders.forEach(()=>{this.audioOutput&&(this.audioOutput.disconnect(),this.audioContext&&this.audioOutput.connect(this.audioContext.destination))}),!0):(console.warn("setAudioPreprocessorError",e),!1)}play(e){let t=this.getLoader();t&&(t.load(e),t.play(0))}pause(){let e=this.getLoader();e&&e.pause()}resume(){let e=this.getLoader();e&&e.play()}stop(e=0){let t=this.getLoader(e);t&&(t.stop(),this.trigger(h.EVENT_STOP,e))}destroy(){this.loaders.forEach(e=>{e.destroy()}),this.trigger(h.EVENT_DESTROY)}getPosition(){let e=this.getLoader();return e?e.currentTime:null}setPosition(e){let t=this.getLoader();t&&t.setPosition(e-.001)}getDuration(e=0){let t=this.getLoader(e);return t?t.duration:null}getLoaded(e){let t=this.getLoader(e);return t&&t.loaded?t.loaded:0}get volumeLevel(){return this.volume}set volumeLevel(e){this.volume=Math.min(1,e),this.webAudioApi&&this.audioOutput?"function"==typeof this.audioOutput.gain.setTargetAtTime&&this.audioContext?this.audioOutput.gain.setTargetAtTime(e,this.audioContext.currentTime,.01):this.audioOutput.gain.value=e:this.loaders.forEach(t=>{t.volumeLevel=e}),this.trigger(h.EVENT_VOLUME)}get speedLevel(){return this.speed}set speedLevel(e){this.speed=e,this.loaders.forEach(t=>{t.defaultPlaybackRate=e,t.playbackRate=e}),this.trigger(h.EVENT_SPEED)}preload(e,t=1){let i=this.getLoader(t);i&&i.load(e)}isPreloaded(e,t=1){let i=this.getLoader(t);return!!i&&i.audioSrc===e&&!i.audioNotLoading}isPreloading(e,t=1){let i=this.getLoader(t);return!!i&&i.audioSrc===e}playPreloaded(e=1){let t=this.getLoader(e),i=!1;return t&&t.audioSrc&&(this.setActive(e),t.play(),i=!0),i}getSrc(e){let t=this.getLoader(e);return t&&""!==t.audioSrc?t.audioSrc:null}isDeviceVolume(){return this.browser.isOnlyDeviceVolume()}isAutoplayable(){let e=this.getLoader(0);return e?e.autoplayable:null}}let y=1;class _{audioContext=this.createAudioContext();emitter=new l;played=0;lastSkip=0;playId=null;initInProgress=!0;shouldUseHlsPlayer;implementation=null;promises={};skipEmptySound;name=y++;state=h.STATE_INIT;whenReady;constructor(e=!1,t=!1){this.shouldUseHlsPlayer=e,this.skipEmptySound=t,this.whenReady=this.init().then(()=>this.onAudioPlayerInit()).catch(e=>{throw this.initInProgress=!1,this.setState(h.STATE_CRASHED),e})}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}trigger(e,...t){this.emitter.trigger(e,...t)}createAudioContext(){return new AudioContext}init(){return new Promise((e,t)=>{window.addEventListener("beforeunload",()=>this.onBeforeUnload(),!0),this.createCore().then(e).catch(()=>{this.retryInit().then(e).catch(t)})})}retryInit(){let e=0,t=(i,s)=>{e+=1,this.initInProgress||i([]),this.createCore().then(i).catch(()=>{e>u.audio.retry?s(new d(c.NO_IMPLEMENTATION)):t(i,s)})},i=new Promise((e,i)=>{t(e,i)});return i}createCore(){return new Promise((e,t)=>{try{this.implementation=new S(this.audioContext,this.shouldUseHlsPlayer,this.skipEmptySound),this.implementation.whenReady.then(e).catch(t)}catch(e){console.warn(e),t(e)}})}onAudioPlayerInit(){this.initInProgress=!1,this.subscribeImplementationEvents(),this.setState(h.STATE_IDLE)}subscribeImplementationEvents(){let e=(e,...t)=>{let i=t[0];if(this.populateEvents(e,...t),!i)switch(e){case h.EVENT_PLAY:this.setState(h.STATE_PLAYING);break;case h.EVENT_ENDED:case h.EVENT_SWAP:case h.EVENT_STOP:case h.EVENT_ERROR:case h.HLS_EVENT_ERROR:this.setState(h.STATE_IDLE);break;case h.EVENT_PAUSE:this.setState(h.STATE_PAUSED);break;case h.EVENT_CRASHED:this.setState(h.STATE_CRASHED)}};this.implementation&&(this.implementation.on(h.EVENT_PROGRESS,(...t)=>e(h.EVENT_PROGRESS,...t)),this.implementation.on(h.EVENT_LOADING,(...t)=>e(h.EVENT_LOADING,...t)),this.implementation.on(h.EVENT_LOADED,(...t)=>e(h.EVENT_LOADED,...t)),this.implementation.on(h.EVENT_ENDED,(...t)=>e(h.EVENT_ENDED,...t)),this.implementation.on(h.EVENT_ERROR,(...t)=>e(h.EVENT_ERROR,...t)),this.implementation.on(h.EVENT_OUTER_PAUSE,(...t)=>e(h.EVENT_OUTER_PAUSE,...t)),this.implementation.on(h.EVENT_PAUSE,(...t)=>e(h.EVENT_PAUSE,...t)),this.implementation.on(h.EVENT_OUTER_PLAY,(...t)=>e(h.EVENT_OUTER_PLAY,...t)),this.implementation.on(h.EVENT_PLAY,(...t)=>e(h.EVENT_PLAY,...t)),this.implementation.on(h.HLS_EVENT_ERROR,(...t)=>e(h.HLS_EVENT_ERROR,...t)),this.implementation.on(h.EVENT_DESTROY,(...t)=>e(h.EVENT_DESTROY,...t)),this.implementation.on(h.EVENT_SWAP,(...t)=>e(h.EVENT_SWAP,...t)),this.implementation.on(h.EVENT_STOP,(...t)=>e(h.EVENT_STOP,...t)),this.implementation.on(h.EVENT_VOLUME,(...t)=>e(h.EVENT_VOLUME,...t)),this.implementation.on(h.EVENT_SPEED,(...t)=>e(h.EVENT_SPEED,...t)))}onBeforeUnload(){"undefined"!=typeof window&&navigator&&1===navigator.maxTouchPoints||this.destroy()}setState(e){if(e===h.STATE_PAUSED&&this.state!==h.STATE_PLAYING)return;let t=this.state!==e;this.state=e,t&&this.trigger(h.EVENT_STATE,e)}waitEvents(e,t,i){let s=()=>{},a=()=>{},r=new Promise((e,t)=>{s=e,a=t});this.promises[e]={promise:()=>r,reject:a};let n=()=>{for(let e of t)this.off(e,s);for(let e of i)this.off(e,a);delete this.promises[e]};for(let e of t)this.on(e,s);let o=e=>t=>{let i=t instanceof Error?t:new d(e);a(i)};for(let e of i)this.on(e,o(e));return r.then(n).catch(n),r}populateEvents(e,...t){let i=t[0],s=(i?h.PRELOADER_EVENT:"")+e;switch(e){case h.EVENT_CRASHED:case h.EVENT_SWAP:this.trigger(e,...t);break;case h.EVENT_ERROR:case h.HLS_EVENT_ERROR:this.trigger(s,...t);break;case h.EVENT_VOLUME:this.trigger(e,this.getVolume());break;case h.EVENT_SPEED:this.trigger(e,this.getSpeed());break;case h.EVENT_PROGRESS:this.trigger(s,{duration:this.getDuration(i),loaded:this.getLoaded(i),position:i?0:this.getPosition(),played:i?0:this.getPlayed()});break;case h.EVENT_OUTER_PLAY:case h.EVENT_OUTER_PAUSE:this.trigger(e);break;default:this.trigger(s)}}initPromise(){return this.whenReady}getState(){return this.state}getSrc(e){return this.implementation?this.implementation.getSrc(e):null}play(e){this.played=0,this.lastSkip=0,this.generatePlayId(),this.promises.whenPlay&&this.promises.whenPlay.reject("play"),this.promises.whenPause&&this.promises.whenPause.reject("play"),this.promises.whenStop&&this.promises.whenStop.reject("play");let t=this.waitEvents("whenPlay",[h.EVENT_PLAY],[h.EVENT_STOP,h.EVENT_ERROR,h.HLS_EVENT_ERROR,h.EVENT_CRASHED]);return this.setState(h.STATE_PAUSED),this.implementation&&this.implementation.play(e),t}restart(){return this.getDuration()?(this.generatePlayId(),this.setPosition(0),this.played=0,this.lastSkip=0,this.resume()):Promise.reject(new d(c.BAD_STATE))}stop(e){let t;return 0!==e&&this.implementation&&(this.implementation.stop(e),Promise.resolve()),this.played=0,this.lastSkip=0,this.promises.whenPlay&&this.promises.whenPlay.reject("stop"),this.promises.whenPause&&this.promises.whenPause.reject("stop"),t=this.promises.whenStop?this.promises.whenStop.promise():this.waitEvents("_whenStop",[h.EVENT_STOP],[h.EVENT_PLAY,h.EVENT_ERROR,h.HLS_EVENT_ERROR,h.EVENT_CRASHED]),this.implementation&&this.implementation.stop(),t}pause(){let e;return this.state!==h.STATE_PLAYING?Promise.reject(new d(c.BAD_STATE)):(this.promises.whenPlay&&this.promises.whenPlay.reject("pause"),e=this.promises.whenPause?this.promises.whenPause.promise():this.waitEvents("_whenPause",[h.EVENT_PAUSE],[h.EVENT_STOP,h.EVENT_PLAY,h.EVENT_ERROR,h.HLS_EVENT_ERROR,h.EVENT_CRASHED]),this.implementation&&this.implementation.pause(),e)}resume(){let e;return this.state!==h.STATE_PLAYING||this.promises.whenPause?this.state===h.STATE_IDLE||this.state===h.STATE_PAUSED||this.state===h.STATE_PLAYING?(this.promises.whenPause&&this.promises.whenPause.reject("resume"),e=this.promises.whenPlay?this.promises.whenPlay.promise():this.waitEvents("_whenPlay",[h.EVENT_PLAY],[h.EVENT_STOP,h.EVENT_ERROR,h.HLS_EVENT_ERROR,h.EVENT_CRASHED]),this.implementation&&this.implementation.resume(),e.then(()=>this.trigger(h.EVENT_RESUME))):Promise.reject(new d(c.BAD_STATE)):Promise.resolve()}playPreloaded(e){let t=e||this.getSrc(1);if(t&&!this.isPreloaded(t))return console.warn("playPreloadedBadTrack",c.NOT_PRELOADED),Promise.reject(new d(c.NOT_PRELOADED));this.played=0,this.lastSkip=0,this.generatePlayId(),this.promises.whenPlay&&this.promises.whenPlay.reject("playPreloaded"),this.promises.whenPause&&this.promises.whenPause.reject("playPreloaded"),this.promises.whenStop&&this.promises.whenStop.reject("playPreloaded");let i=this.waitEvents("whenPlay",[h.EVENT_PLAY],[h.EVENT_STOP,h.EVENT_ERROR,h.HLS_EVENT_ERROR,h.EVENT_CRASHED]);this.setState(h.STATE_PAUSED);let s=!1;return this.implementation&&(s=this.implementation.playPreloaded()),!s&&this.promises.whenPlay&&(console.warn("playPreloadedError",c.NOT_PRELOADED),this.promises.whenPlay.reject(new d(c.NOT_PRELOADED))),i}destroy(){this.played=0,this.lastSkip=0,this.promises.whenPlay&&this.promises.whenPlay.reject("destroy"),this.promises.whenPause&&this.promises.whenPause.reject("destroy"),this.implementation&&this.implementation.destroy()}preload(e){this.promises.whenPreload&&this.promises.whenPreload.reject("preload");let t=this.waitEvents("whenPreload",[h.PRELOADER_EVENT+h.EVENT_LOADING,h.EVENT_SWAP],[h.PRELOADER_EVENT+h.EVENT_CRASHED,h.PRELOADER_EVENT+h.EVENT_ERROR,h.PRELOADER_EVENT+h.HLS_EVENT_ERROR,h.PRELOADER_EVENT+h.EVENT_STOP]);return this.implementation&&this.implementation.preload(e),t}isPreloaded(e){return!!this.implementation&&this.implementation.isPreloaded(e)}isPreloading(e){return!!this.implementation&&this.implementation.isPreloading(e,1)}getPosition(){let e=null;return this.implementation&&(e=this.implementation.getPosition()),e||0}setPosition(e){return this.implementation&&this.implementation.setPosition(e),this.played+=this.getPosition()-this.lastSkip,this.lastSkip=e,e}getDuration(e=0){let t=null;return this.implementation&&this.implementation.getDuration(e)&&(t=this.implementation.getDuration(e)),t||0}getLoaded(e=0){return this.implementation?this.implementation.getLoaded(e):0}getPlayed(){let e=this.getPosition();return this.played+=e-this.lastSkip,this.lastSkip=e,this.played}getVolume(){return this.implementation?this.implementation.volumeLevel:0}setVolume(e){let t=0;return this.implementation&&(this.implementation.volumeLevel=e,t=e),t}getSpeed(){return this.implementation?this.implementation.speedLevel:0}setSpeed(e){let t=0;return this.implementation&&(this.implementation.speedLevel=e,t=e),t}isDeviceVolume(){return!this.implementation||this.implementation.isDeviceVolume()}isAutoplayable(){let e=null;return this.implementation&&(e=this.implementation.isAutoplayable()),null!==e&&e}toggleCrossDomain(e){let t=!1;return this.implementation&&(this.implementation.toggleCrossDomain(e),t=!0),t}toggleWebAudioAPI(e){let t=!1;return this.implementation&&(t=this.implementation.toggleWebAudioAPI(e)),t}setAudioPreprocessor(e){let t=!1;return this.implementation&&(t=this.implementation.setAudioPreprocessor(e)),t}generatePlayId(){this.playId=Math.random().toString().slice(2)}getPlayId(){return this.playId}}class b{pauseHandlers=[];resumeHandlers=[];core=new _;play(e){return this.core.play(e)}setProgress(e){let t=this.core.setPosition(e);return this.core.trigger(h.EVENT_POSITION),Promise.resolve(t)}pause(){return this.core.pause()}resume(){return this.core.resume()}setVolume(e){let t=this.core.setVolume(e);return this.core.trigger(h.EVENT_VOLUME),Promise.resolve(t)}stop(){return this.core.stop(0)}onAudioEnd(e){this.core.on(h.EVENT_ENDED,e)}onAudioPaused(e){let t=()=>{"paused"===this.core.getState()&&e()};this.pauseHandlers.push({handler:t,originalCallback:e}),this.core.on(h.EVENT_STATE,t)}onAudioResume(e){this.core.on(h.EVENT_RESUME,e)}onAudioUpdatingProgress(e){this.core.on(h.EVENT_PROGRESS,e)}onAudioSetProgress(e){this.core.on(h.EVENT_POSITION,e)}onAudioSetVolume(e){this.core.on(h.EVENT_VOLUME,e)}offAudioEnd(e){this.core.off(h.EVENT_ENDED,e)}offAudioPaused(e){let t=this.pauseHandlers.find(t=>t.originalCallback===e);t&&this.core.off(h.EVENT_STATE,t.handler)}offAudioResume(e){this.core.off(h.EVENT_RESUME,e)}offAudioUpdatingProgress(e){this.core.off(h.EVENT_PROGRESS,e)}offAudioSetProgress(e){this.core.off(h.EVENT_POSITION,e)}offAudioSetVolume(e){this.core.off(h.EVENT_VOLUME,e)}}var f=i(7796),V=i(15860),L=i(46543);class C{apply(e){let{hooks:t,playback:i}=e;t.afterContextSet.tap("ApplyContextPlugin",()=>{let e=i.state.currentContext.value;e&&e instanceof L.$n&&e.apply({hooks:t,playback:i})})}}function R(e){let t=e.state.queueState.index.value,i=e.state.queueState.order.value,s=e.state.currentContext.value,a=void 0!==i[t+1],r=void 0!==i[t-1];s&&(s.availableActions.moveBackward.value=r,s.availableActions.moveForward.value=a)}class I{apply(e){let{hooks:t,playback:i}=e;i.state.queueState.entityList.onChange(()=>{R(i)}),t.beforeEntityPlayingProcessStart.tapPromise("AvailableOptionsPlugin",()=>(R(i),Promise.resolve()))}}class O{apply(e){let{playback:t,hooks:i}=e;t.state.playerState.status.onChange(()=>{let{currentEntity:e}=t.state.queueState;if(e.value)switch(t.state.playerState.status.value){case L.Xz.PLAYING:e.value.entity.saveTimeStageOfPlayback(V.EE.PLAYING);break;case L.Xz.PAUSED:e.value.entity.saveTimeStageOfPlayback(V.EE.NOT_PLAYING)}}),i.beforeEntityPlayingProcessStart.tapPromise("TotalPlayedTimePlugin",()=>{let{currentEntity:e}=t.state.queueState;return e.value&&e.value.entity.clearTimeStagesOfPlayback(),Promise.resolve()}),i.beforeEntityChange.tapPromise("TotalPlayedTimePlugin",()=>{let{currentEntity:e}=t.state.queueState;return e.value&&e.value.entity.saveTimeStageOfPlayback(V.EE.NOT_PLAYING),Promise.resolve()}),i.beforeContextSet.tap("TotalPlayedTimePlugin",()=>{let{currentEntity:e}=t.state.queueState;return e.value&&e.value.entity.saveTimeStageOfPlayback(V.EE.NOT_PLAYING),Promise.resolve()})}}var w=i(42503),D=i(23463);function x(){let e=new Date;return e.toISOString()}function k(e){let{contextEntityPair:t,totalPlayedSeconds:i,endPositionSeconds:s}=e,{entity:a,context:r}=t,n=String(a.data.meta.id),o=function(e){let t;if(e.data.type!==L.RX.Unloaded){let{data:{meta:{albums:i}}}=e;if(i){let e=i[0];e&&(t=String(e.id))}}return t}(a),l=0;a.data.type!==L.RX.Unloaded&&a.data.meta.durationMs&&(l=a.data.meta.durationMs/1e3);let u=i,d=s;.5>Math.abs(l-i)&&(u=l),.5>Math.abs(l-s)&&(d=l);let c={playId:a.playId,timestamp:x(),totalPlayedSeconds:u,endPositionSeconds:d,trackLengthSeconds:l,trackId:n,albumId:o,from:r.from};return(0,f.xA)(r)&&r.data.meta.session&&(c.radioSessionId=r.data.meta.session.radioSessionId),{isSent:!1,data:c}}var G=i(83993);class q extends G.y{name="PlaysException";constructor(e,{code:t="E_PLAYS",...i}={}){super(e,{code:t,...i}),Object.setPrototypeOf(this,q.prototype)}}class U{entityPlaysMap={};playsResource;constructor(e){let{httpClient:t,playsResourceConfig:i}=e;this.playsResource=new D.ol(t,i)}apply(e){let{hooks:t,playback:i}=e;t.beforeEntityPlayingProcessStart.tapPromise("PlaysPlugin",()=>new Promise(e=>{this.sendStartEntityPlay(i,t),e()})),t.beforeContextSet.tapPromise("PlaysPlugin",()=>new Promise(e=>{i.state.queueState.currentEntity.value&&i.state.currentContext.value?(0,f.xA)(i.state.currentContext.value)?this.sendEndEntityPlay(i,t).then(e):(this.sendEndEntityPlay(i,t),e()):e()})),t.beforeEntityChange.tapPromise("PlaysPlugin",()=>new Promise(e=>{i.state.queueState.currentEntity.value&&i.state.currentContext.value?(0,f.xA)(i.state.currentContext.value)?this.sendEndEntityPlay(i,t).then(e):(this.sendEndEntityPlay(i,t),e()):e()}))}sendStartEntityPlay(e,t){return new Promise(i=>{let s=e.state.queueState.currentEntity.value;try{if(s){s.entity.playId=(0,w.Z)();let e=k({contextEntityPair:s,totalPlayedSeconds:0,endPositionSeconds:0});this.saveEntityPlay(e),this.playsResource.sendPlays({clientNow:x(),plays:[e.data]}).then(()=>{e.isSent=!0,i()}).catch(a=>{e.isSent=!1;let r="",n="";s&&(r=s.context.data.meta.id,n=s.entity.data.meta.id),t.afterError.promise(new q("Error while sending plays",{cause:a,data:{contextId:r,entityId:n}})),i()})}else i()}catch(r){let e="",a="";s&&(e=s.context.data.meta.id,a=s.entity.data.meta.id),t.afterError.promise(new q("Error while sending plays",{cause:r,data:{contextId:e,entityId:a}})),i()}})}sendEndEntityPlay(e,t){return new Promise(i=>{let s=e.state.queueState.currentEntity.value;try{if(s){let a;let r=s.entity.totalPlayedSeconds;a=0===r?k({contextEntityPair:s,totalPlayedSeconds:.1,endPositionSeconds:.1}):k({contextEntityPair:s,totalPlayedSeconds:r,endPositionSeconds:e.state.playerState.progress.value.position}),this.saveEntityPlay(a),this.playsResource.sendPlays({clientNow:x(),plays:[a.data]}).then(()=>{a.isSent=!0,i()}).catch(e=>{a.isSent=!1;let r="",n="";s&&(r=s.context.data.meta.id,n=s.entity.data.meta.id),t.afterError.promise(new q("Error while sending plays",{cause:e,data:{contextId:r,entityId:n}})),i()})}else i()}catch(r){let e="",a="";s&&(e=s.context.data.meta.id,a=s.entity.data.meta.id),t.afterError.promise(new q("Error while sending plays",{cause:r,data:{contextId:e,entityId:a}})),i()}})}saveEntityPlay(e){let t=this.entityPlaysMap[e.data.playId];void 0===t?this.entityPlaysMap[e.data.playId]=[e]:t.push(e)}}(s=a||(a={})).PLAY="play",s.PAUSE="pause",s.NEXT="nexttrack",s.PREV="previoustrack",s.SEEK="seekto",s.STOP="stop";let j=[30,50,80,100,200,300,400],M=[a.PLAY,a.PAUSE,a.STOP,a.SEEK];class B{browserName;browserVersion;constructor({browserName:e,browserVersion:t}){this.browserName=e,this.browserVersion=t}isSupported(){return"mediaSession"in window.navigator&&"MediaMetadata"in window}handleMediaActionEvents(e,t){let{action:i}=e;switch(i){case a.PLAY:t.resume();break;case a.PAUSE:case a.STOP:t.pause();break;case a.NEXT:t.moveForward();break;case a.PREV:t.moveBackward();break;case a.SEEK:{let{seekTime:i}=e;i&&t.setProgress(i)}}}prepareMetadata(e){let t;let{title:i,artists:s=[],albums:a,coverUri:r}=e,n=s.map(e=>e.name).join(", "),o=a?.[0]?.title;return r&&(t=j.map(e=>{let t=`${e}x${e}`;return"Safari"===this.browserName&&(t=`${2*e}x${2*e}`),{sizes:t,src:`https://${r.replace("%%",t)}`,type:"image/jpg"}})),{title:i,artist:n,album:o,artwork:t}}updateMetadata(e){if(!e)return;let t=this.prepareMetadata(e);window.navigator.mediaSession.metadata=new MediaMetadata(t)}handlePlayerEvents(e){let t,i;e.state.playerState.event.onChange(()=>{(e.state.playerState.event.value===L.KX.START||e.state.playerState.event.value===L.KX.UPDATING_PROGRESS)&&(this.updateMetadata(e.state.queueState.currentEntity.value?.entity.data.meta),M.forEach(t=>{try{window.navigator.mediaSession.setActionHandler(t,t=>this.handleMediaActionEvents(t,e))}catch{console.log(`The media session action "${t}" is not supported yet.`)}}))}),e.state.currentContext.onChange(()=>{t?.(),i?.(),t=e.state.currentContext.value?.availableActions.moveBackward.onChange(()=>{let t=e.state.currentContext.value?.availableActions.moveBackward.value??!1;window.navigator.mediaSession.setActionHandler(a.PREV,t?t=>this.handleMediaActionEvents(t,e):null)}),i=e.state.currentContext.value?.availableActions.moveForward.onChange(()=>{let t=e.state.currentContext.value?.availableActions.moveForward.value??!1;window.navigator.mediaSession.setActionHandler(a.NEXT,t?t=>this.handleMediaActionEvents(t,e):null)})})}apply(e){let{playback:t}=e;this.isSupported()&&this.handlePlayerEvents(t)}}class H{logger;constructor(e){let{logger:t}=e;this.logger=t}apply(e){let{hooks:t}=e;t.afterError.tapPromise("LoggerPlugin",e=>{let t;return(t=e instanceof G.y?e:new G.y("Error in Sonata player",{code:"E_SONATA",cause:e})).name=`[Sonata] ${t.name}`,this.logger.error(t,{data:t.data,code:t.code,cause:t.cause}),Promise.resolve()})}}async function Y(e){let{secretKey:t,trackId:i,tsInSeconds:s}=e,a=new TextEncoder,r=a.encode(t);return crypto.subtle.importKey("raw",r,{name:"HMAC",hash:{name:"SHA-256"}},!0,["sign","verify"]).then(async e=>{let t=`${i}${s}`,r=a.encode(t);return crypto.subtle.sign("HMAC",e,r).then(e=>{let t=new Uint8Array(e),i=btoa(String.fromCharCode(...t));return i})})}class F extends G.y{name="DownloadInfoMediaProviderException";constructor(e,{code:t="E_DOWNLOADINFO_MEDIA_PROVIDER",...i}={}){super(e,{code:t,...i}),Object.setPrototypeOf(this,F.prototype)}}class W{secretKey;resource;constructor(e){let{httpClient:t,config:i}=e;this.resource=new D.HZ(t,{params:i.params,prefixUrl:i.prefixUrl,overembed:i.overembed,externalDomain:i.externalDomain}),this.secretKey=i.secretKey}async getSrc(e){try{let{downloadInfoParams:{formatFlags:t={},direct:i,preview:s,requireMp3Link:a,canUseStreaming:r,debug:n,isAliceRequester:o},entity:l}=e,{id:u}=l.data.meta,d=function(e){let t=[];for(let i of Object.keys(e))if("codec"===i){let s=e[i];s&&t.push(s)}else t.push(i);return t.length?t.join(","):void 0}(t),c=Math.floor(Date.now()/1e3);return await Y({trackId:u,secretKey:this.secretKey,tsInSeconds:c}).then(async e=>this.resource.getStorageData({formatFlags:d,direct:i,preview:s,canUseStreaming:r,sign:e,tsInSeconds:c,requireMp3Link:a,isAliceRequester:o,debug:n,trackId:String(u)}).then(async e=>{let t=e[0];return t?this.resource.getSrcData({storageUrl:t.downloadInfoUrl}).then(e=>{let t=function(e){let{srcData:t,secretKey:i,trackId:s}=e,a=function(e,t){let i,s,a,r,n,o,l,u,d;let c=String.fromCharCode;function h(e,t){return e<<t|e>>>32-t}function E(e,t){let i,s,a,r,n;return(a=2147483648&e,r=2147483648&t,i=1073741824&e,s=1073741824&t,n=(1073741823&e)+(1073741823&t),i&s)?2147483648^n^a^r:i|s?1073741824&n?3221225472^n^a^r:1073741824^n^a^r:n^a^r}function m(e,t,i,s,a,r,n){return e=E(e,E(E(t&i|~t&s,a),n)),E(h(e,r),t)}function A(e,t,i,s,a,r,n){return e=E(e,E(E(t&s|i&~s,a),n)),E(h(e,r),t)}function p(e,t,i,s,a,r,n){return e=E(e,E(E(t^i^s,a),n)),E(h(e,r),t)}function g(e,t,i,s,a,r,n){return e=E(e,E(E(i^(t|~s),a),n)),E(h(e,r),t)}function v(e){let t="",i="",s;for(s=0;s<=3;s++)t+=(i=`0${(e>>>8*s&255).toString(16)}`).substr(i.length-2,2);return t}let P=[];for(i=0,P=function(e){let t;let i=e.length,s=i+8,a=((s-s%64)/64+1)*16,r=Array(a-1),n=0,o=0;for(;o<i;)t=(o-o%4)/4,n=o%4*8,r[t]=r[t]|e.charCodeAt(o)<<n,o++;return t=(o-o%4)/4,n=o%4*8,r[t]=r[t]|128<<n,r[a-2]=i<<3,r[a-1]=i>>>29,r}(e=function(e){e=t+e.replace(/\r\n/g,"\n");let i="";for(let t=0;t<e.length;t++){let s=e.charCodeAt(t);s<128?i+=c(s):s>127&&s<2048?i+=c(s>>6|192)+c(63&s|128):i+=c(s>>12|224)+c(s>>6&63|128)+c(63&s|128)}return i}(e)),o=1732584193,l=4023233417,u=2562383102,d=271733878;i<P.length;i+=16)s=o,a=l,r=u,n=d,o=m(o,l,u,d,P[i+0],7,3614090360),d=m(d,o,l,u,P[i+1],12,3905402710),u=m(u,d,o,l,P[i+2],17,606105819),l=m(l,u,d,o,P[i+3],22,3250441966),o=m(o,l,u,d,P[i+4],7,4118548399),d=m(d,o,l,u,P[i+5],12,1200080426),u=m(u,d,o,l,P[i+6],17,2821735955),l=m(l,u,d,o,P[i+7],22,4249261313),o=m(o,l,u,d,P[i+8],7,1770035416),d=m(d,o,l,u,P[i+9],12,2336552879),u=m(u,d,o,l,P[i+10],17,4294925233),l=m(l,u,d,o,P[i+11],22,2304563134),o=m(o,l,u,d,P[i+12],7,1804603682),d=m(d,o,l,u,P[i+13],12,4254626195),u=m(u,d,o,l,P[i+14],17,2792965006),l=m(l,u,d,o,P[i+15],22,1236535329),o=A(o,l,u,d,P[i+1],5,4129170786),d=A(d,o,l,u,P[i+6],9,3225465664),u=A(u,d,o,l,P[i+11],14,643717713),l=A(l,u,d,o,P[i+0],20,3921069994),o=A(o,l,u,d,P[i+5],5,3593408605),d=A(d,o,l,u,P[i+10],9,38016083),u=A(u,d,o,l,P[i+15],14,3634488961),l=A(l,u,d,o,P[i+4],20,3889429448),o=A(o,l,u,d,P[i+9],5,568446438),d=A(d,o,l,u,P[i+14],9,3275163606),u=A(u,d,o,l,P[i+3],14,4107603335),l=A(l,u,d,o,P[i+8],20,1163531501),o=A(o,l,u,d,P[i+13],5,2850285829),d=A(d,o,l,u,P[i+2],9,4243563512),u=A(u,d,o,l,P[i+7],14,1735328473),l=A(l,u,d,o,P[i+12],20,2368359562),o=p(o,l,u,d,P[i+5],4,4294588738),d=p(d,o,l,u,P[i+8],11,2272392833),u=p(u,d,o,l,P[i+11],16,1839030562),l=p(l,u,d,o,P[i+14],23,4259657740),o=p(o,l,u,d,P[i+1],4,2763975236),d=p(d,o,l,u,P[i+4],11,1272893353),u=p(u,d,o,l,P[i+7],16,4139469664),l=p(l,u,d,o,P[i+10],23,3200236656),o=p(o,l,u,d,P[i+13],4,681279174),d=p(d,o,l,u,P[i+0],11,3936430074),u=p(u,d,o,l,P[i+3],16,3572445317),l=p(l,u,d,o,P[i+6],23,76029189),o=p(o,l,u,d,P[i+9],4,3654602809),d=p(d,o,l,u,P[i+12],11,3873151461),u=p(u,d,o,l,P[i+15],16,530742520),l=p(l,u,d,o,P[i+2],23,3299628645),o=g(o,l,u,d,P[i+0],6,4096336452),d=g(d,o,l,u,P[i+7],10,1126891415),u=g(u,d,o,l,P[i+14],15,2878612391),l=g(l,u,d,o,P[i+5],21,4237533241),o=g(o,l,u,d,P[i+12],6,1700485571),d=g(d,o,l,u,P[i+3],10,2399980690),u=g(u,d,o,l,P[i+10],15,4293915773),l=g(l,u,d,o,P[i+1],21,2240044497),o=g(o,l,u,d,P[i+8],6,1873313359),d=g(d,o,l,u,P[i+15],10,4264355552),u=g(u,d,o,l,P[i+6],15,2734768916),l=g(l,u,d,o,P[i+13],21,1309151649),o=g(o,l,u,d,P[i+4],6,4149444226),d=g(d,o,l,u,P[i+11],10,3174756917),u=g(u,d,o,l,P[i+2],15,718787259),l=g(l,u,d,o,P[i+9],21,3951481745),o=E(o,s),l=E(l,a),u=E(u,r),d=E(d,n);let T=v(o)+v(l)+v(u)+v(d);return T.toLowerCase()}(t.path.substr(1)+t.s,i),r=`/get-mp3/${a}/${t.ts}${t.path}?track-id=${s}&play=false`;return`https://${t.host}${r}`}({trackId:u,srcData:e,secretKey:this.secretKey});return t}).catch(e=>{throw new F("Error in getSrcData",{code:"E_GET_SRC_DATA",cause:e,data:{trackId:u}})}):Promise.reject(new F("No storage url for entity",{code:"E_NO_STORAGE_URL",data:{trackId:u}}))}).catch(e=>{throw new F("Failed to get storages urls for entity",{code:"E_GET_STORAGE_URL",cause:e,data:{trackId:u}})})).catch(e=>{throw new F("Failed to create sign",{code:"E_CREATE_SIGN",cause:e,data:{trackId:u}})})}catch(e){return Promise.reject(new F("Error in getSrc method",{cause:e}))}}}class K extends G.y{name="YaMusicEntityProviderException";constructor(e,{code:t="E_YAMUSIC_ENTITY_PROVIDER",...i}={}){super(e,{code:t,...i}),Object.setPrototypeOf(this,K.prototype)}}class ${resource;constructor(e){let{httpClient:t,config:i}=e;this.resource=new D.HZ(t,{params:i.params,prefixUrl:i.prefixUrl})}async loadEntities(e){return this.resource.getTracksMeta({trackIds:e}).then(e=>{let t=[];for(let i of e)t.push({type:V.A4.Unknown,meta:i});return t}).catch(e=>{throw new K("Failed to get entities meta",{cause:e})})}}var X=i(86502),Z=i(80930),z=i(27951);let Q=null,J=(0,n.Pi)(e=>{let{children:t,hostTld:i,userAgent:s}=e,a=(0,z.uK)(),{sonataState:n}=(0,z.oR)(),l=(0,z.wL)(),u=a.get(z.V0),d=(0,o.useMemo)(()=>{if(Q)return Q;let e=a.get(z.U5),t=a.get(z.pI),r=t({credentials:"include"}),n=a.get(z.xi),o=new f.Tg({httpClient:r,logger:l,config:{params:{common:{client:(0,Z.$)(),language:e.language,oauth:n.token}},prefixUrl:(0,z.vw)(e.player.prefixUrl,i)}}),u=new V.nS,d=new W({httpClient:r,config:{params:{common:{client:(0,Z.$)(),language:e.language,oauth:n.token}},prefixUrl:(0,z.vw)(e.player.prefixUrl,i),secretKey:e.player.secretKey,overembed:e.player.overembed,externalDomain:e.player.externalDomain}}),c=new $({httpClient:r,config:{params:{common:{client:(0,Z.$)(),language:e.language,oauth:n.token}},prefixUrl:(0,z.vw)(e.player.prefixUrl,i)}}),h=new b;return Q=new X.$7({contextFactory:o,entityFactory:u,audioCore:h,mediaProvider:d,entityProvider:c,windowPaginationConfig:{windowSize:30,setupQueueWindowSize:80},plugins:[new I,new C,new O,new U({httpClient:r,playsResourceConfig:{params:{common:{client:(0,Z.$)(),language:e.language,oauth:n.token}},prefixUrl:(0,z.vw)(e.player.prefixUrl,i)}}),new B({browserName:s.browserName,browserVersion:s.browserVersion}),new H({logger:l})]})},[a,i,s,l]);return(0,o.useEffect)(()=>{let e,t;let i=null==d?void 0:d.state.playerState.status.onChange(()=>{let e=d.state.queueState.currentEntity.value,t=null==e?void 0:e.context.data.type,i=null==e?void 0:e.context.data.meta.id;n.setContextId(i),n.setContextType(t)}),s=null==d?void 0:d.state.playerState.event.onChange(()=>{var e;let t=d.state.queueState.currentEntity.value;n.setEntityMeta(null!==(e=null==t?void 0:t.entity.data.meta)&&void 0!==e?e:null),n.setStatus(d.state.playerState.status.value)}),a=null==d?void 0:d.state.currentContext.onChange(()=>{var i,s,a,r;null===(i=e)||void 0===i||i(),null===(s=t)||void 0===s||s(),e=null==d?void 0:null===(a=d.state.currentContext.value)||void 0===a?void 0:a.availableActions.moveBackward.onChange(()=>{var e,t;let i=null!==(t=null==d?void 0:null===(e=d.state.currentContext.value)||void 0===e?void 0:e.availableActions.moveBackward.value)&&void 0!==t&&t;n.setCanMoveBackward(i)}),t=null==d?void 0:null===(r=d.state.currentContext.value)||void 0===r?void 0:r.availableActions.moveForward.onChange(()=>{var e,t;let i=null!==(t=null==d?void 0:null===(e=d.state.currentContext.value)||void 0===e?void 0:e.availableActions.moveForward.value)&&void 0!==t&&t;n.setCanMoveForward(i)})}),r=null==d?void 0:d.state.playerState.volume.onChange(()=>{let e=d.state.playerState.volume.value;"number"==typeof e&&n.setVolume(e)});return()=>{null==s||s(),null==i||i(),null==a||a(),null==r||r()}},[d,n]),(0,o.useEffect)(()=>{let e=u.get(z.BU.YmPlayerVolume);"number"==typeof e?(null==d||d.setVolume(e),n.setVolume(e)):(null==d||d.setVolume(1),n.setVolume(1))},[u,d,n]),(0,r.jsx)(z.R8.Provider,{value:d,children:t})})},27619:function(e,t,i){"use strict";i.r(t),i.d(t,{StoreProvider:function(){return Y}});var s=i(8759),a=i(33423),r=i(96555),n=i(11769),o=i(99616),l=i(27951),u=i(86502);let d={experiments:{loadingState:l.Gu.IDLE,experiments:{}},user:{account:{loadingState:l.Gu.IDLE},settings:{loadingState:l.Gu.IDLE,showWizard:!0}},collection:{albums:{loadingState:l.Gu.IDLE,items:[]},playlistsCreated:{loadingState:l.Gu.IDLE,items:[]},playlistsLiked:{loadingState:l.Gu.IDLE,items:[]},artists:{loadingState:l.Gu.IDLE,items:[]},landing:{loadingState:l.Gu.IDLE,tabs:{loadingState:l.Gu.IDLE,data:[]}}},main:{landing:{loadingState:l.Gu.IDLE,tabs:{loadingState:l.Gu.IDLE,data:[]}}},settings:{layout:null,clientTld:"ru"},album:{loadingState:l.Gu.IDLE,items:[],otherAlbumVersions:[],latestGenreAlbums:{loadingState:l.Gu.IDLE,items:[]},otherArtistAlbums:{loadingState:l.Gu.IDLE,items:[]}},artist:{loadingState:l.Gu.IDLE,popularTracks:[],similarArtists:[],popularAlbums:[],playlists:[]},library:{loadingState:l.Gu.IDLE,tracks:{},artists:{},playlists:{},albums:{}},sonataState:{contextId:null,contextType:null,entityMeta:null,status:u.Xz.IDLE,canMoveBackward:!1,canMoveForward:!1},playlist:{loadingState:l.Gu.IDLE,meta:null,items:[]},slides:{userSlidesLoadingState:l.Gu.IDLE,artistSlidesLoadingState:l.Gu.IDLE,userItems:[],artistItems:[]},vibe:{getLastLoadingState:l.Gu.IDLE,vibeResetLoadingState:l.Gu.IDLE,isLoading:!1},search:{loadingState:l.Gu.IDLE,results:[]},vibeSettings:{loadingState:l.Gu.IDLE}};var c=i(19243),h=i(81661),E=i(77404),m=i(29152),A=i(17864);let p=r.V5.model("Albums",{loadingState:r.V5.enumeration(Object.values(l.Gu)),sort:r.V5.maybeNull(A.PE),items:r.V5.array(m.fm)}).actions(e=>({getData:(0,r.ls)(function*(t){let{userId:i,page:s,pageSize:a,sortBy:n,sortOrder:o,metaType:u}=t,{usersResource:d,logger:c}=(0,r.dU)(e);if(e.loadingState!==l.Gu.PENDING){e.sort=null,n&&o&&(e.sort={sortBy:n,sortOrder:o});try{e.loadingState=l.Gu.PENDING;let t=yield d.getLikedAlbums({userId:i,page:s,pageSize:a,sortBy:n,sortOrder:o,metaType:u});e.items=(0,r.pj)(t.map(e=>{let{album:t}=e;return(0,m.H7)(t)})),e.loadingState=l.Gu.RESOLVE}catch(t){("string"==typeof t||t instanceof Error)&&c.error(t),e.loadingState=l.Gu.REJECT}}})}));var g=i(30150);let v=r.V5.model("Artists",{loadingState:r.V5.enumeration(Object.values(l.Gu)),sort:r.V5.maybeNull(A.PE),items:r.V5.array(g.xh)}).actions(e=>({getData:(0,r.ls)(function*(t){let{userId:i,page:s,pageSize:a,sortBy:n,sortOrder:o}=t,{usersResource:u,logger:d}=(0,r.dU)(e);if(e.loadingState!==l.Gu.PENDING){e.sort=null,n&&o&&(e.sort={sortBy:n,sortOrder:o});try{e.loadingState=l.Gu.PENDING;let t=yield u.getLikedArtists({userId:i,page:s,pageSize:a,sortBy:n,sortOrder:o});e.items=(0,r.pj)(t.map(g.d)),e.loadingState=l.Gu.RESOLVE}catch(t){("string"==typeof t||t instanceof Error)&&d.error(t),e.loadingState=l.Gu.REJECT}}})}));var P=i(90271);function T(e){let{items:t,mappedRawItems:i,page:s,pageSize:a}=e,r=s*a,n=0;for(let e=r;e<r+a;e++)i[n]&&(t[e]=i[n]),n++}let N=r.V5.model("PlaylistsCreated",{loadingState:r.V5.enumeration(Object.values(l.Gu)),sort:r.V5.maybeNull(A.PE),items:r.V5.array(r.V5.maybeNull(P.gO)),pager:r.V5.maybeNull(A.uE),alreadyRequestedPages:r.V5.map(r.V5.number),kinds:r.V5.array(r.V5.number),requests:r.V5.maybeNull(r.V5.number)}).actions(e=>({getKinds:(0,r.ls)(function*(t){let i=[],{usersResource:s}=(0,r.dU)(e);i=yield s.getPlaylistsKinds({userId:t}),e.kinds=(0,r.pj)(i)})})).actions(e=>({getData:(0,r.ls)(function*(t){let{userId:i,page:s=0,pageSize:a=20,withLikesCount:n}=t,{usersResource:o,logger:u}=(0,r.dU)(e);if(!(e.loadingState===l.Gu.PENDING||e.alreadyRequestedPages.has("".concat(s)))){"number"==typeof s&&e.alreadyRequestedPages.set("".concat(s),s);try{var d;e.loadingState=l.Gu.PENDING,0===e.kinds.length&&(yield e.getKinds(i));let t=s*a,u=t+a,c=e.kinds.slice(t,u),h=yield o.getPlaylistsByKinds({userId:i,kinds:c,withLikesCount:n,withTracks:!1});e.requests=(null!==(d=e.requests)&&void 0!==d?d:0)+1;let E={page:s,perPage:a,total:e.kinds.length};0===e.items.length&&(e.items=(0,r.pj)(Array.from({length:E.total},()=>null)));let m=h.map(e=>(0,P.VB)(e));T({items:e.items,mappedRawItems:m,page:s,pageSize:a}),e.pager=E,e.loadingState=l.Gu.RESOLVE}catch(t){("string"==typeof t||t instanceof Error)&&u.error(t),e.loadingState=l.Gu.REJECT}}})})),S=r.V5.model("PlaylistsLiked",{loadingState:r.V5.enumeration(Object.values(l.Gu)),sort:r.V5.maybeNull(A.PE),items:r.V5.array(r.V5.maybeNull(P.gO)),pager:r.V5.maybeNull(A.uE),alreadyRequestedPages:r.V5.map(r.V5.number),requests:r.V5.maybeNull(r.V5.number)}).actions(e=>({getData:(0,r.ls)(function*(t){let{userId:i,page:s=0,pageSize:a=20,sortBy:n,sortOrder:o,metaType:u,withTracks:d}=t;if(e.alreadyRequestedPages.has("".concat(s)))return;"number"==typeof s&&e.alreadyRequestedPages.set("".concat(s),s);let{usersResource:c,logger:h}=(0,r.dU)(e);e.sort=null,n&&o&&(e.sort={sortBy:n,sortOrder:o});try{var E;e.loadingState=l.Gu.PENDING;let{likedPlaylists:t,pager:h}=yield c.getLikedPlaylists({userId:i,page:s,pageSize:a,sortBy:n,sortOrder:o,metaType:u,withTracks:d});e.requests=(null!==(E=e.requests)&&void 0!==E?E:0)+1,0===e.items.length&&(e.items=(0,r.pj)(Array.from({length:h.total},()=>null)));let m=t.map(e=>{let{playlist:t}=e;return(0,P.VB)(t)});T({items:e.items,mappedRawItems:m,page:s,pageSize:a}),e.pager=h,e.loadingState=l.Gu.RESOLVE}catch(t){("string"==typeof t||t instanceof Error)&&h.error(t),"number"==typeof s&&e.alreadyRequestedPages.delete("".concat(s)),e.requests="number"==typeof e.requests?e.requests-1:0,e.loadingState=l.Gu.REJECT}})})),y=r.V5.model("Collection",{landing:E.v,albums:p,playlistsLiked:S,playlistsCreated:N,artists:v});i(84836),i(15868),i(67162),i(23741),i(70987),i(54109);let _=r.V5.model("Main",{landing:E.v});var b=i(86644);i(74328);var f=i(23463),V=i(77467);let L=[f.Sc.ALBUM,f.Sc.ARTIST,f.Sc.PLAYLIST,f.Sc.TRACK,f.Sc.UGC_TRACK],C=e=>e===f.ay.TOP?L.filter(e=>e!==f.Sc.UGC_TRACK):L;var R=i(75434),I=i(93909);let O=e=>e.map(e=>{switch(e.type){case f.Sc.ALBUM:return{type:f.Sc.ALBUM,data:(0,m.H7)(e.album)};case f.Sc.ARTIST:return{type:f.Sc.ARTIST,data:(0,g.d)(e.artist)};case f.Sc.PLAYLIST:return{type:f.Sc.PLAYLIST,data:(0,R._B)({...e.playlist,artists:[]})};case f.Sc.UGC_TRACK:return{type:f.Sc.UGC_TRACK,data:(0,I.t$)(e.track)};case f.Sc.TRACK:return{type:f.Sc.TRACK,data:(0,I.sZ)(e.track)}}}),w=r.V5.model("Search",{loadingState:r.V5.enumeration(Object.values(l.Gu)),searchRequestId:r.V5.optional(r.V5.string,""),results:r.V5.array(V.T2)}).actions(e=>({getSearchResults:(0,r.ls)(function*(t){let{text:i,filter:s}=t,{searchResource:a}=(0,r.dU)(e);try{e.loadingState=l.Gu.PENDING;let t=yield a.getInstantMixedSearch({text:i,type:C(s),filter:s===f.ay.TOP?void 0:s,withLikesCount:!0,page:0,pageSize:36});t.results&&t.results.length>0&&(e.results=(0,r.pj)(O(t.results)),e.searchRequestId=t.searchRequestId),e.loadingState=l.Gu.RESOLVE}catch(t){e.loadingState=l.Gu.REJECT}}),resetResults(){e.results=(0,r.pj)([])},sendFeedback:(0,r.ls)(function*(t){let{searchResource:i,logger:s}=(0,r.dU)(e);try{yield i.sendFeedback(t)}catch(e){("string"==typeof e||e instanceof Error)&&s.error(e)}})})).views(e=>({get isLoading(){return e.loadingState===l.Gu.IDLE||e.loadingState===l.Gu.PENDING},get isEmpty(){return(e.loadingState===l.Gu.RESOLVE||e.loadingState===l.Gu.REJECT)&&0===e.results.length}}));var D=i(49334),x=i(36875),k=i(51466),G=i(47747),q=i(78631);let U=r.V5.model("Root",{experiments:A.pe,user:q.n5,collection:y,main:_,settings:A.Zr,album:c.dp,artist:h.xh,library:A.Zu,sonataState:x.YY,playlist:b.gO,slides:G.My,vibe:D.T9,search:w,vibeSettings:k.ap}),j=(e,t)=>U.create(e,t);var M=i(58616);let B=["settings","sonataState"],H=(e,t)=>B.reduce((t,i)=>(t[i]=e[i],t),(0,M.Z)(t));(0,a.DT)(!1);let Y=e=>{let{children:t,nonce:i}=e;(0,o.useRef)([]),(0,o.useContext)(n.ServerInsertedHTMLContext);let a=(0,l.YS)(),u=(0,l.wL)(),[c]=(0,o.useState)(()=>{var e;let t={...a,logger:u};return(null===(e=window.__STATE_SNAPSHOT__)||void 0===e?void 0:e.length)?j(window.__STATE_SNAPSHOT__[window.__STATE_SNAPSHOT__.length-1],t):j(d,t)});return(0,o.useLayoutEffect)(()=>{function e(){var e;let t=null===(e=window.__STATE_SNAPSHOT__)||void 0===e?void 0:e[window.__STATE_SNAPSHOT__.length-1];t&&(0,r.Xx)(c,H(c,t)),delete window.__STATE_SNAPSHOT__}return e(),window.addEventListener("yMusicStateSnapshotUpdated",e),()=>window.removeEventListener("yMusicStateSnapshotUpdated",e)},[c]),(0,s.jsx)(l.xf.Provider,{value:c,children:t})}},19976:function(e,t,i){"use strict";i.r(t),i.d(t,{TranslationsProvider:function(){return n}});var s=i(8759),a=i(99616),r=i(28151);let n=e=>{let{dictionary:t,children:i}=e,n=(0,a.useMemo)(()=>t,[]);return(0,s.jsx)(r.Z,{defaultLocale:"ru-RU",locale:"ru-RU",messages:n,children:i})}},71615:function(e,t,i){"use strict";i.r(t),i.d(t,{TvmProvider:function(){return s}}),i(99616),i(27951);let s=e=>{let{children:t}=e;return t}},46971:function(e,t,i){"use strict";i.d(t,{N$:function(){return a},eZ:function(){return n},tX:function(){return r}});var s=i(27951);let a=()=>{var e;null===(e=window.desktopEvents)||void 0===e||e.send(s.BO.WINDOW_MINIMIZE)},r=()=>{var e;null===(e=window.desktopEvents)||void 0===e||e.send(s.BO.WINDOW_MAXIMIZE)},n=()=>{var e;null===(e=window.desktopEvents)||void 0===e||e.send(s.BO.WINDOW_CLOSE)}},71865:function(e,t,i){"use strict";i.r(t),i.d(t,{NotificationUpdate:function(){return h}});var s=i(8759),a=i(35338),r=i(99616),n=i(15527),o=i(1918),l=i(27951),u=i(90779),d=i(12576),c=i.n(d);let h=e=>{let{version:t,formatMessage:i,closeToast:d}=e,h=(0,r.useCallback)(()=>{var e;null===(e=window.desktopEvents)||void 0===e||e.send(l.BO.ON_UPDATE_INSTALL),null==d||d()},[d]),E=(0,r.useMemo)(()=>(0,s.jsxs)("div",{className:c().message,children:[(0,s.jsx)(o.Caption,{className:c().text,variant:"div",type:"controls",size:"m",children:i({id:"desktop.on-update-available"},{version:t})}),(0,s.jsx)(n.Button,{className:c().button,onClick:h,variant:"default",color:"secondary",size:"xs",radius:"xxxl",children:(0,s.jsx)(o.Caption,{variant:"div",type:"controls",size:"m",children:i({id:"desktop.update"})})})]}),[i,h,t]);return(0,s.jsx)(u.Yj,{className:(0,a.W)(c().root,c().important),message:E})}},58081:function(e,t,i){"use strict";i.r(t),i.d(t,{TitleBar:function(){return E}});var s=i(8759),a=i(35338),r=i(33423),n=i(99616),o=i(65244),l=i(27951),u=i(46971),d=i(99750),c=i.n(d);let h=e=>{let{children:t,className:i,onClick:r,ariaLabel:n}=e;return(0,s.jsx)("button",{type:"button",className:(0,a.W)(c().button,i),onClick:r,"aria-label":n,children:t})},E=(0,r.Pi)(()=>{let e=(0,l.Xf)(),t=e===l.t4.WINDOWS,{formatMessage:i}=(0,o.Z)(),a=(0,n.useCallback)(()=>{(0,u.N$)()},[]),r=(0,n.useCallback)(()=>{(0,u.tX)()},[]),d=(0,n.useCallback)(()=>{(0,u.eZ)()},[]);return(0,s.jsx)("div",{className:c().root,onDoubleClick:r,children:t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{onClick:a,ariaLabel:i({id:"windows-menu.roll-up"}),children:(0,s.jsx)("svg",{width:"10",height:"1",viewBox:"0 0 10 1",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M0.498047 1C0.429688 1 0.364583 0.986979 0.302734 0.960938C0.244141 0.934896 0.192057 0.899089 0.146484 0.853516C0.100911 0.807943 0.0651042 0.755859 0.0390625 0.697266C0.0130208 0.635417 0 0.570312 0 0.501953C0 0.433594 0.0130208 0.370117 0.0390625 0.311523C0.0651042 0.249674 0.100911 0.195964 0.146484 0.150391C0.192057 0.101562 0.244141 0.0641276 0.302734 0.0380859C0.364583 0.0120443 0.429688 -0.000976562 0.498047 -0.000976562H9.50195C9.57031 -0.000976562 9.63379 0.0120443 9.69238 0.0380859C9.75423 0.0641276 9.80794 0.101562 9.85352 0.150391C9.89909 0.195964 9.9349 0.249674 9.96094 0.311523C9.98698 0.370117 10 0.433594 10 0.501953C10 0.570312 9.98698 0.635417 9.96094 0.697266C9.9349 0.755859 9.89909 0.807943 9.85352 0.853516C9.80794 0.899089 9.75423 0.934896 9.69238 0.960938C9.63379 0.986979 9.57031 1 9.50195 1H0.498047Z",fill:"white"})})}),(0,s.jsx)(h,{onClick:r,ariaLabel:i({id:"windows-menu.unwrap"}),children:(0,s.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M1.47461 10C1.2793 10 1.09212 9.96094 0.913086 9.88281C0.734049 9.80143 0.576172 9.69401 0.439453 9.56055C0.30599 9.42383 0.198568 9.26595 0.117188 9.08691C0.0390625 8.90788 0 8.7207 0 8.52539V1.47461C0 1.2793 0.0390625 1.09212 0.117188 0.913086C0.198568 0.734049 0.30599 0.577799 0.439453 0.444336C0.576172 0.307617 0.734049 0.200195 0.913086 0.12207C1.09212 0.0406901 1.2793 0 1.47461 0H8.52539C8.7207 0 8.90788 0.0406901 9.08691 0.12207C9.26595 0.200195 9.4222 0.307617 9.55566 0.444336C9.69238 0.577799 9.7998 0.734049 9.87793 0.913086C9.95931 1.09212 10 1.2793 10 1.47461V8.52539C10 8.7207 9.95931 8.90788 9.87793 9.08691C9.7998 9.26595 9.69238 9.42383 9.55566 9.56055C9.4222 9.69401 9.26595 9.80143 9.08691 9.88281C8.90788 9.96094 8.7207 10 8.52539 10H1.47461ZM8.50098 8.99902C8.56934 8.99902 8.63281 8.986 8.69141 8.95996C8.75326 8.93392 8.80697 8.89811 8.85254 8.85254C8.89811 8.80697 8.93392 8.75488 8.95996 8.69629C8.986 8.63444 8.99902 8.56934 8.99902 8.50098V1.49902C8.99902 1.43066 8.986 1.36719 8.95996 1.30859C8.93392 1.24674 8.89811 1.19303 8.85254 1.14746C8.80697 1.10189 8.75326 1.06608 8.69141 1.04004C8.63281 1.014 8.56934 1.00098 8.50098 1.00098H1.49902C1.43066 1.00098 1.36556 1.014 1.30371 1.04004C1.24512 1.06608 1.19303 1.10189 1.14746 1.14746C1.10189 1.19303 1.06608 1.24674 1.04004 1.30859C1.014 1.36719 1.00098 1.43066 1.00098 1.49902V8.50098C1.00098 8.56934 1.014 8.63444 1.04004 8.69629C1.06608 8.75488 1.10189 8.80697 1.14746 8.85254C1.19303 8.89811 1.24512 8.93392 1.30371 8.95996C1.36556 8.986 1.43066 8.99902 1.49902 8.99902H8.50098Z",fill:"white"})})}),(0,s.jsx)(h,{className:c().closeButton,onClick:d,ariaLabel:i({id:"windows-menu.close"}),children:(0,s.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M5 5.70801L0.854492 9.85352C0.756836 9.95117 0.639648 10 0.50293 10C0.359701 10 0.239258 9.9528 0.141602 9.8584C0.0472005 9.76074 0 9.6403 0 9.49707C0 9.36035 0.0488281 9.24316 0.146484 9.14551L4.29199 5L0.146484 0.854492C0.0488281 0.756836 0 0.638021 0 0.498047C0 0.429688 0.0130208 0.364583 0.0390625 0.302734C0.0651042 0.240885 0.100911 0.188802 0.146484 0.146484C0.192057 0.100911 0.245768 0.0651042 0.307617 0.0390625C0.369466 0.0130208 0.43457 0 0.50293 0C0.639648 0 0.756836 0.0488281 0.854492 0.146484L5 4.29199L9.14551 0.146484C9.24316 0.0488281 9.36198 0 9.50195 0C9.57031 0 9.63379 0.0130208 9.69238 0.0390625C9.75423 0.0651042 9.80794 0.100911 9.85352 0.146484C9.89909 0.192057 9.9349 0.245768 9.96094 0.307617C9.98698 0.366211 10 0.429688 10 0.498047C10 0.638021 9.95117 0.756836 9.85352 0.854492L5.70801 5L9.85352 9.14551C9.95117 9.24316 10 9.36035 10 9.49707C10 9.56543 9.98698 9.63053 9.96094 9.69238C9.9349 9.75423 9.89909 9.80794 9.85352 9.85352C9.8112 9.89909 9.75911 9.9349 9.69727 9.96094C9.63542 9.98698 9.57031 10 9.50195 10C9.36198 10 9.24316 9.95117 9.14551 9.85352L5 5.70801Z",fill:"white"})})})]})})})},36875:function(e,t,i){"use strict";i.d(t,{WP:function(){return g},YY:function(){return _},KX:function(){return V},SB:function(){return f}});var s=i(8759),a=i(33423),r=i(99616),n=i(86502),o=i(27951),l=i(65244),u=i(15527),d=i(14581),c=i(90779),h=i(57004),E=i(19035),m=i.n(E);let A=e=>{let{disabled:t,isPlaying:i,canMoveForward:a,canMoveBackward:r,onClickNext:n,onClickPrev:o,onClickPlayPause:E}=e,{formatMessage:A}=(0,l.Z)();return(0,s.jsxs)("div",{className:m().root,children:[(0,s.jsx)(c.fi,{title:A({id:"player-actions.shuffle"}),children:(0,s.jsx)(u.Button,{radius:"round",size:"xxxs",variant:"text",disabled:!0,withRipple:!1,"aria-label":A({id:"player-actions.shuffle"}),icon:(0,s.jsx)(d.Icon,{variant:"shuffle",size:"xs"})})}),(0,s.jsxs)("div",{className:m().sonataButtons,children:[(0,s.jsx)(u.Button,{className:m().sonataButton,variant:"text",size:"m",radius:"round",disabled:!r,withRipple:!1,"aria-label":A({id:"player-actions.previous-track"}),icon:(0,s.jsx)(d.Icon,{variant:"previous"}),onClick:o}),(0,s.jsx)(h.PlayButton,{className:m().sonataButton,disabled:t,iconSize:"l",variant:"filled",isPlaying:i,iconClassName:m().playButtonIcon,onClick:E}),(0,s.jsx)(u.Button,{className:m().sonataButton,radius:"round",size:"m",variant:"text",disabled:!a,withRipple:!1,"aria-label":A({id:"player-actions.next-track"}),icon:(0,s.jsx)(d.Icon,{variant:"next"}),onClick:n})]}),(0,s.jsx)(c.fi,{title:A({id:"player-actions.repeat"}),children:(0,s.jsx)(u.Button,{radius:"round",size:"xxxs",variant:"text",disabled:!0,withRipple:!1,"aria-label":A({id:"player-actions.repeat"}),icon:(0,s.jsx)(d.Icon,{variant:"repeat",size:"xs"})})})]})},p=e=>{let{disabled:t,isPlaying:i,onClickPlayPause:a}=e;return(0,s.jsx)(h.PlayButton,{size:"s",disabled:t,isPlaying:i,onClick:a})},g=(0,a.Pi)(e=>{var t;let{isMobile:i,entityMeta:a}=e,{sonataState:l,vibe:u}=(0,o.oR)(),d=(0,o.R$)(),{togglePlay:c}=(0,o.Qh)({seeds:null===(t=u.meta)||void 0===t?void 0:t.seeds,pageIdForFrom:o.Rh.HOME,blockIdForFrom:o.aU.RUP_MAIN}),h=(0,r.useMemo)(()=>l.status===n.Xz.PLAYING,[l.status]),E=(0,r.useCallback)(()=>{a?null==d||d.togglePause():c()},[a,d,c]),m=(0,r.useCallback)(()=>{null==d||d.moveForward()},[d]),g=(0,r.useCallback)(()=>{null==d||d.moveBackward()},[d]),v=(0,r.useMemo)(()=>i?p:A,[i]);return(0,s.jsx)(v,{disabled:!1,isPlaying:h,canMoveBackward:l.canMoveBackward,canMoveForward:l.canMoveForward,onClickPlayPause:E,onClickNext:m,onClickPrev:g})});var v=i(96555),P=i(7796),T=i(30150),N=i(73351);let S=e=>{var t;let i=null===(t=e.artists)||void 0===t?void 0:t.map(e=>(0,T.d)(e));return(0,v.pj)({...(0,N.Vt)(e),artists:i})},y=N.fQ.props({artists:v.V5.array(T.xh)}),_=v.V5.model("SonataState",{contextType:v.V5.maybeNull(v.V5.enumeration(Object.values(P.Ak))),contextId:v.V5.maybeNull(v.V5.string),entityMeta:v.V5.maybeNull(y),status:v.V5.enumeration(Object.values(n.Xz)),canMoveForward:v.V5.boolean,canMoveBackward:v.V5.boolean,volume:v.V5.maybe(v.V5.number)}).actions(e=>({setContextId:t=>{e.contextId=String(t)},setContextType:t=>{e.contextType=t},setEntityMeta:t=>{t&&(e.entityMeta=S(t))},setStatus:t=>{e.status=t},setCanMoveForward:t=>{e.canMoveForward=t},setCanMoveBackward:t=>{e.canMoveBackward=t},setVolume:t=>{e.volume=t}}));var b=i(23463);let f=e=>{let{user:t}=(0,o.oR)(),{notify:i}=(0,o.d$)(),[a,n]=(0,r.useState)(!1),{formatMessage:u}=(0,l.Z)(),d=(0,o.R$)();return(0,r.useCallback)(async()=>{if(e){if(!t.isAuthorized){i((0,s.jsx)(c.Q,{error:u({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$.ERROR});return}if(a)return;n(!0);let r=await e.toggleLike();if(n(!1),r===b.Bi.OK){i((0,s.jsx)(N.Yc,{track:e}),{containerId:o.W$.INFO});let t=e.isLiked?b.C.LIKE:b.C.UNLIKE;d&&(0,P.xA)(d.state.currentContext.value)&&d.state.currentContext.value.sendFeedback(d.state.playerState,d.state.queueState,t)}else i((0,s.jsx)(c.Q,{error:u({id:"error-messages.error-during-action"})}),{containerId:o.W$.ERROR})}},[e,t.isAuthorized,a,i,u,d])},V=e=>{let{user:t,sonataState:i}=(0,o.oR)(),a=(0,o.R$)(),{notify:n}=(0,o.d$)(),[u,d]=(0,r.useState)(!1),{formatMessage:h}=(0,l.Z)();return(0,r.useCallback)(async()=>{if(e){if(!t.isAuthorized){n((0,s.jsx)(c.Q,{error:h({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$.ERROR});return}if(u)return;d(!0);let r=await e.toggleDislike();if(d(!1),r===b.Bi.OK){n((0,s.jsx)(N.a_,{isDisliked:e.isDisliked,coverUri:e.coverUri,title:e.title}),{containerId:o.W$.INFO});let t=e.isDisliked?b.C.DISLIKE:b.C.UNDISLIKE;a&&(0,P.xA)(a.state.currentContext.value)&&await a.state.currentContext.value.sendFeedback(a.state.playerState,a.state.queueState,t),e.isDisliked&&i.canMoveForward&&(null==a||a.moveForward())}else n((0,s.jsx)(c.Q,{error:h({id:"error-messages.error-during-action"})}),{containerId:o.W$.ERROR})}},[e,t.isAuthorized,u,n,h,i,a])}},19243:function(e,t,i){"use strict";i.d(t,{dp:function(){return y},Xb:function(){return s.AlbumPage}});var s=i(79486);i(79265);var a=i(96555),r=i(96431),n=i(23463),o=i(29152),l=i(27951);let u=(e,t)=>e.map(e=>"".concat(e,":").concat(t));var d=i(93909),c=i(33614);let h=e=>({type:c.l.TEXT,data:e||null}),E=(e,t,i,s)=>({type:c.l.TRACK,id:e,data:i||null,loadingState:t,position:s}),m=e=>"".concat(e,"-text"),A=e=>String(e),p=(e,t,i)=>{e.forEach(e=>{var s,a,r,n,o;if(null===(s=e.albums)||void 0===s?void 0:s[0]){let s=i.get(A(e.id));void 0!==s&&(t[s]=E(e.id,l.Gu.RESOLVE,(0,d.sZ)(e),null===(r=e.albums[0])||void 0===r?void 0:null===(a=r.trackPosition)||void 0===a?void 0:a.index));let u=i.get(m(e.id));void 0!==u&&(t[u]=h(null===(o=e.albums[0])||void 0===o?void 0:null===(n=o.trackPosition)||void 0===n?void 0:n.volume))}})},g=(e,t,i,s)=>{let a=0;e.volumes.forEach(r=>{e.volumes.length>1&&r[0]&&(t.push(h()),i.set(m(r[0].id),t.length-1)),r.forEach(e=>{t.push(E(e.id,l.Gu.IDLE)),i.set(A(e.id),t.length-1),s.set(A(e.id),a),a++})})},v=(e,t,i,s)=>{e.forEach(e=>{let a=i.get(String(e));void 0!==a&&(t[a]=E(e,s))})},P=a.V5.model("RelatedAlbums",{loadingState:a.V5.enumeration(Object.values(l.Gu)),items:a.V5.array(o.fm)}),T=a.V5.model("VolumeItemTrack",{type:a.V5.literal(c.l.TRACK),id:a.V5.union(a.V5.string,a.V5.number),data:a.V5.maybeNull(d.mv),position:a.V5.maybe(a.V5.number),loadingState:a.V5.enumeration(Object.values(l.Gu))}),N=a.V5.model("VolumeItemText",{type:a.V5.literal(c.l.TEXT),data:a.V5.maybeNull(a.V5.number)}),S=a.V5.union(N,T),y=a.V5.model("Album",{meta:a.V5.maybeNull(o.fm),items:a.V5.array(S),indexItems:a.V5.map(a.V5.number),trackIndexInContext:a.V5.map(a.V5.number),loadingState:a.V5.enumeration(Object.values(l.Gu)),errorStatusCode:a.V5.maybeNull(a.V5.number),latestGenreAlbums:P,otherArtistAlbums:P,otherAlbumVersions:a.V5.array(o.fm)}).views(e=>({get isNonMusicType(){var t;if(null===(t=e.meta)||void 0===t?void 0:t.type)return[n.VZ.PODCAST,n.VZ.AUDIOBOOK].includes(e.meta.type);return!1}})).views(e=>({get isOtherArtistAlbumsAvailable(){var t,i,s,a;return!!(!e.isNonMusicType&&(null===(i=e.meta)||void 0===i?void 0:null===(t=i.artists)||void 0===t?void 0:t.length)===1&&!(null===(a=e.meta)||void 0===a?void 0:null===(s=a.artists[0])||void 0===s?void 0:s.various))},get isLatestGenreAlbumsAvailable(){var n;return!!(!e.isNonMusicType&&(null===(n=e.meta)||void 0===n?void 0:n.genre))},get isNotFound(){return e.loadingState===l.Gu.REJECT&&e.errorStatusCode===r.CN.NOT_FOUND},get isAlbumLoadingError(){return e.loadingState===l.Gu.REJECT},get isOtherAlbumVersionsExist(){return!!(e.loadingState===l.Gu.IDLE||e.loadingState===l.Gu.PENDING||e.otherAlbumVersions&&e.otherAlbumVersions.length>0)},get isLatestGenreAlbumsExist(){return!!(e.latestGenreAlbums.loadingState===l.Gu.IDLE||e.latestGenreAlbums.loadingState===l.Gu.PENDING||e.latestGenreAlbums.items&&e.latestGenreAlbums.items.length>0)},get isOtherArtistAlbumsExist(){return!!(e.otherArtistAlbums.loadingState===l.Gu.IDLE||e.otherArtistAlbums.loadingState===l.Gu.PENDING||e.otherArtistAlbums.items&&e.otherArtistAlbums.items.length>0)},get isAlbumLoading(){return e.loadingState===l.Gu.IDLE||e.loadingState===l.Gu.PENDING},get isLatestGenreAlbumsLoading(){return e.latestGenreAlbums.loadingState===l.Gu.IDLE||e.latestGenreAlbums.loadingState===l.Gu.PENDING},get isOtherArtistAlbumsLoading(){return e.otherArtistAlbums.loadingState===l.Gu.IDLE||e.otherArtistAlbums.loadingState===l.Gu.PENDING}})).actions(e=>({getLatestGenreAlbums:(0,a.ls)(function*(t){let{topResource:i,logger:s}=(0,a.dU)(e);if(e.latestGenreAlbums.loadingState!==l.Gu.PENDING)try{e.latestGenreAlbums.loadingState=l.Gu.PENDING;let s=yield i.getTopByGenre(t);e.latestGenreAlbums.items=(0,a.pj)(s.albums.map(o.H7)),e.latestGenreAlbums.loadingState=l.Gu.RESOLVE}catch(t){("string"==typeof t||t instanceof Error)&&s.error(t),e.latestGenreAlbums.loadingState=l.Gu.REJECT}})})).actions(e=>({getOtherArtistAlbums:(0,a.ls)(function*(t,i){let{artistsResource:s,logger:r}=(0,a.dU)(e);if(e.otherArtistAlbums.loadingState!==l.Gu.PENDING)try{if(!t.artistId){e.otherArtistAlbums.loadingState=l.Gu.REJECT;return}e.otherArtistAlbums.loadingState=l.Gu.PENDING;let r=yield s.getSafeDirectAlbums({...t,artistId:t.artistId});e.otherArtistAlbums.items=(0,a.pj)(r.albums.filter(e=>String(e.id)!==String(i)).map(o.H7)),e.otherArtistAlbums.loadingState=l.Gu.RESOLVE}catch(t){("string"==typeof t||t instanceof Error)&&r.error(t),e.otherArtistAlbums.loadingState=l.Gu.REJECT}})})).actions(e=>({getTracks:(0,a.ls)(function*(t){let{trackIds:i}=t,{tracksResource:s,logger:r}=(0,a.dU)(e);try{var n;if(!(null===(n=e.meta)||void 0===n?void 0:n.id))return;v(i,e.items,e.indexItems,l.Gu.PENDING);let t=yield s.getTracksMeta({trackIds:u(i,e.meta.id)});p(t,e.items,e.indexItems)}catch(t){("string"==typeof t||t instanceof Error)&&r.error(t),v(i,e.items,e.indexItems,l.Gu.REJECT)}})})).actions(e=>({getData:(0,a.ls)(function*(t){let{albumId:i}=t,{albumResource:s,logger:u}=(0,a.dU)(e),{experiments:d}=(0,a.yj)(e),h=d.checkExperiment(l.pe.WebNextAlbumDisableVersions,"on"),E=d.checkExperiment(l.pe.WebNextAlbumDisableTracks,"on"),m=d.checkExperiment(l.pe.WebNextAlbumDisableLatestGenreAlbums,"on"),A=d.checkExperiment(l.pe.WebNextAlbumDisableOtherArtistAlbums,"on");if(e.loadingState!==l.Gu.PENDING)try{var p,v;let t,u;e.loadingState=l.Gu.PENDING;let d=yield s.getAlbumWithTracksIds({albumId:i,resumeStream:!1});if((null==d?void 0:d.error)==="not-found"){e.errorStatusCode=r.CN.NOT_FOUND,e.loadingState=l.Gu.REJECT,e.otherArtistAlbums.loadingState=l.Gu.REJECT,e.latestGenreAlbums.loadingState=l.Gu.REJECT;return}if(e.meta=(0,o.H7)(d),!h&&d.duplicates&&d.duplicates.length>0&&(e.otherAlbumVersions=(0,a.pj)(null===(p=d.duplicates)||void 0===p?void 0:p.map(o.H7))),!E){g(d,e.items,e.indexItems,e.trackIndexInContext);let t=[];for(let i=0;i<10;i++){let s=e.items[i];(null==s?void 0:s.type)===c.l.TRACK&&t.push(String(s.id))}yield e.getTracks({trackIds:t})}!m&&e.isLatestGenreAlbumsAvailable?t=e.getLatestGenreAlbums({category:n.mk.RECENT_ALBUMS,period:n.pH.WEEK,pageSize:8,genre:d.genre}):e.latestGenreAlbums.loadingState=l.Gu.RESOLVE,!A&&e.isOtherArtistAlbumsAvailable?u=e.getOtherArtistAlbums({artistId:String(null===(v=d.artists[0])||void 0===v?void 0:v.id),limit:8},i):e.otherArtistAlbums.loadingState=l.Gu.RESOLVE,yield Promise.allSettled([t,u]),e.loadingState!==l.Gu.IDLE&&(e.loadingState=l.Gu.RESOLVE)}catch(t){("string"==typeof t||t instanceof Error)&&u.error(t),t instanceof r.du&&(t.statusCode===r.CN.NOT_FOUND||t.statusCode===r.CN.BAD_REQUEST)&&(e.errorStatusCode=r.CN.NOT_FOUND),e.loadingState!==l.Gu.IDLE&&(e.loadingState=l.Gu.REJECT,e.otherArtistAlbums.loadingState=l.Gu.REJECT,e.latestGenreAlbums.loadingState=l.Gu.REJECT)}}),reset(){e.meta=null,e.errorStatusCode=null,e.items=(0,a.pj)([]),e.indexItems.clear(),e.trackIndexInContext.clear(),e.loadingState=l.Gu.IDLE,e.latestGenreAlbums.loadingState=l.Gu.IDLE,e.latestGenreAlbums.items=(0,a.pj)([]),e.otherArtistAlbums.loadingState=l.Gu.IDLE,e.otherArtistAlbums.items=(0,a.pj)([]),e.otherAlbumVersions=(0,a.pj)([])}}))},33614:function(e,t,i){"use strict";var s,a;i.d(t,{l:function(){return s}}),(a=s||(s={})).TRACK="track",a.TEXT="text"},79486:function(e,t,i){"use strict";i.r(t),i.d(t,{AlbumPage:function(){return S}});var s=i(8759),a=i(35338),r=i(33423),n=i(11769),o=i(99616),l=i(65244),u=i(2814),d=i(7796),c=i(27287),h=i(1918),E=i(43400),m=i(23042),A=i(29152),p=i(93909),g=i(27951),v=i(90779),P=i(33614),T=i(20180),N=i.n(T);let S=(0,r.Pi)(e=>{var t;let{albumId:i}=e,r=(0,g.x5)({pageId:g.Rh.ALBUM,blockId:g.aU.ALBUM}),T=(0,o.useRef)(0),S=(0,g.uK)(),{notify:y}=(0,g.d$)();S.get(g.Xt);let{album:_,experiments:b}=(0,g.oR)(),{formatMessage:f}=(0,l.Z)(),V=(0,o.useMemo)(()=>{var e;return(0,g.XG)(null==_?void 0:null===(e=_.meta)||void 0===e?void 0:e.averageColor)},[null==_?void 0:null===(t=_.meta)||void 0===t?void 0:t.averageColor]),{ref:L,offsetY:C}=(0,c.e)(),R=(0,o.useMemo)(()=>{if(void 0!==C){let e=C-17;return{"--average-color-background":V,transform:"translateY(".concat(C>=17?0:e,"px)"),opacity:1}}return{}},[C,!1,V]);(0,o.useEffect)(()=>()=>{_.id!==i&&(_.reset(),T.current=0)},[_,i]),(0,o.useEffect)(()=>{_.isAlbumLoadingError&&!_.isNotFound&&T&&0===T.current&&(y((0,s.jsx)(v.Q,{error:f({id:"album-errors.error-during-loading-album"})}),{containerId:g.W$.ERROR}),T.current++),(_.otherArtistAlbums.loadingState===g.Gu.REJECT||_.latestGenreAlbums.loadingState===g.Gu.REJECT)&&T&&0===T.current&&(y((0,s.jsx)(v.Q,{error:f({id:"album-errors.error-during-loading-similar-albums"})}),{containerId:g.W$.ERROR}),T.current++)},[_.isAlbumLoadingError,_.isNotFound,_.latestGenreAlbums.loadingState,_.otherArtistAlbums.loadingState,f,y]);let I=(0,o.useMemo)(()=>_.isAlbumLoading||_.isAlbumLoadingError?(0,s.jsx)(m.KC,{className:N().header}):(0,s.jsx)(m.hx,{album:_.meta,className:N().header,"aria-labelledby":"virtual-grid-header",ref:L}),[_.isAlbumLoading,_.isAlbumLoadingError,_.meta,L]),O=(0,o.useMemo)(()=>({Header:()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.h,{}),I]}),Footer:()=>(0,s.jsxs)("div",{className:N().footerContainer,children:[(0,s.jsxs)("div",{children:[_.isOtherAlbumVersionsExist&&(0,s.jsx)(A.wk,{className:N().carousel,containerClassName:(0,a.W)(N().carouselContainer,N().important),isLoading:_.isAlbumLoading,title:f({id:"entity-names.other-album-versions"}),albums:_.otherAlbumVersions}),_.isLatestGenreAlbumsExist&&(0,s.jsx)(A.wk,{className:N().carousel,containerClassName:(0,a.W)(N().carouselContainer,N().important),isLoading:_.isLatestGenreAlbumsLoading,title:f({id:"entity-names.new-albums-in-genre"}),albums:_.latestGenreAlbums.items}),_.isOtherArtistAlbumsExist&&(0,s.jsx)(A.wk,{className:N().carousel,containerClassName:(0,a.W)(N().carouselContainer,N().important),isLoading:_.isOtherArtistAlbumsLoading,title:f({id:"entity-names.other-albums-of-artist"}),albums:_.otherArtistAlbums.items})]}),(0,s.jsx)(v.$_,{className:N().footer})]})}),[I,_.isOtherAlbumVersionsExist,_.isAlbumLoading,_.otherAlbumVersions,_.isLatestGenreAlbumsExist,_.isLatestGenreAlbumsLoading,_.latestGenreAlbums.items,_.isOtherArtistAlbumsExist,_.isOtherArtistAlbumsLoading,_.otherArtistAlbums.items,f]),w=(0,o.useCallback)(e=>{let t=[];for(let i=e.startIndex;i<=e.endIndex;i++){let e=_.items[i];(null==e?void 0:e.type)===P.l.TRACK&&(null==e?void 0:e.loadingState)===g.Gu.IDLE&&t.push(e.id)}t.length&&_.getTracks({trackIds:t})},[_]);_.loadingState===g.Gu.IDLE&&(0,o.use)(_.getData({albumId:i})),(0,g.NO)(_.loadingState===g.Gu.RESOLVE),_.isNotFound&&(0,n.notFound)();let D=b.checkExperiment(g.pe.WebNextAlbumDisableTracks,"on"),x=D?0:_.items.length||10;return(0,s.jsxs)(g.Lh,{pageId:g.Rh.ALBUM,children:[(0,s.jsx)("div",{className:N().averageColorBackground,style:R}),(0,s.jsx)(v.Wv,{className:(0,a.W)(N().root,N().important),listClassName:N().content,customComponents:O,totalCount:x,itemContentCallback:e=>{var t,i;let n=null==_?void 0:null===(t=_.items)||void 0===t?void 0:t[e];if(!n)return(0,s.jsx)(v.DX,{className:N().shimmerItem,variant:g.Lx.ALBUM});if(!(null==n?void 0:n.data))switch(null==n?void 0:n.type){case P.l.TEXT:return(0,s.jsx)(v.AH,{className:N().shimmerItem});case P.l.TRACK:return(0,s.jsx)(v.DX,{className:N().shimmerItem,variant:g.Lx.ALBUM})}switch(null==n?void 0:n.type){case P.l.TRACK:return(0,s.jsx)(p.RJ,{track:n.data,position:n.position,albumArtists:null==_?void 0:null===(i=_.meta)||void 0===i?void 0:i.artists,playContextParams:{contextData:{type:d.Ak.Album,meta:{id:_.meta.id},from:r},queueParams:{index:_.trackIndexInContext.get(n.id)}}});case P.l.TEXT:return(0,s.jsx)("div",{className:(0,a.W)(N().shimmerItem,N().textItem),children:(0,s.jsx)(h.Caption,{variant:"span",type:"entity",size:"m",weight:"medium",className:N().text,children:(0,s.jsx)(u.Z,{id:"entity-names.disk-number",values:{number:n.data}})})})}},onGetDataByRange:w,debounceDurationInMs:300,initialItemCount:x})]})})},79265:function(e,t,i){"use strict";i.r(t),i.d(t,{AlbumNotFoundPage:function(){return l}});var s=i(8759),a=i(33423),r=i(99616),n=i(2365),o=i(27951);let l=(0,a.Pi)(()=>{let{album:e}=(0,o.oR)();return(0,r.useEffect)(()=>()=>{e.reset()},[e]),(0,s.jsx)(n.T,{})})},81661:function(e,t,i){"use strict";i.d(t,{xh:function(){return m},xA:function(){return s.ArtistPage}});var s=i(39148);i(47657);var a=i(96555),r=i(96431),n=i(29152),o=i(20380),l=i(75434),u=i(93909),d=i(30150),c=i(27951);let h=(e,t)=>(0,a.pj)({artist:(0,d.d)(e),lastMonthListeners:null==t?void 0:t.lastMonthListeners}),E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=e;return e.length<i&&(s=s.concat(t)),s.map(n.H7).slice(0,i)},m=a.V5.model("Artist",{loadingState:a.V5.enumeration(Object.values(c.Gu)),meta:a.V5.maybeNull(o.b),popularTracks:a.V5.array(u.mv),lastRelease:a.V5.maybeNull(n.fm),similarArtists:a.V5.array(d.xh),popularAlbums:a.V5.array(n.fm),playlists:a.V5.array(l.EA),errorStatusCode:a.V5.maybeNull(a.V5.number)}).actions(e=>({getData:(0,a.ls)(function*(t){let{artistId:i}=t,{slides:s,experiments:o}=(0,a.yj)(e),{artistsResource:m,logger:A}=(0,a.dU)(e),p=o.checkExperiment(c.pe.WebNextArtistDisableLastReleases,"on"),g=o.checkExperiment(c.pe.WebNextArtistDisablePopularTracks,"on"),v=o.checkExperiment(c.pe.WebNextArtistDisableSimilarArtists,"on"),P=o.checkExperiment(c.pe.WebNextArtistDisablePopularAlbums,"on"),T=o.checkExperiment(c.pe.WebNextArtistDisablePlaylists,"on");if(e.loadingState!==c.Gu.PENDING)try{e.loadingState=c.Gu.PENDING;let{popularTracks:t,error:o,artist:A,stats:N,albums:S,playlists:y,alsoAlbums:_,similarArtists:b,lastReleases:f}=yield m.getBriefInfo({artistId:i,popularTracksCount:5,fetchPlaylistLikesCounts:!0});if("not-found"===o||(null==A?void 0:A.error)==="not-found"){e.errorStatusCode=r.CN.NOT_FOUND,e.loadingState=c.Gu.REJECT;return}if(e.meta=(0,a.pj)(h(A,N)),!p&&f&&f.length>0){let t=f[0];t&&S&&S.length>1&&(e.lastRelease=(0,a.pj)((0,n.H7)(t)))}!g&&t&&t.length>0&&(e.popularTracks=(0,a.pj)(t.slice(0,5).map(u.sZ))),!v&&b&&b.length>0&&(e.similarArtists=(0,a.pj)(b.slice(0,9).map(d.d))),P||(e.popularAlbums=(0,a.pj)(E(S,_,9))),!T&&y&&y.length>0&&(e.playlists=(0,a.pj)(y.map(l.Q9))),s.artistReset(),s.artistSlidesLoadingState===c.Gu.IDLE&&(yield s.getArtistSlides({artistId:i})),e.loadingState!==c.Gu.IDLE&&(e.loadingState=c.Gu.RESOLVE)}catch(t){("string"==typeof t||t instanceof Error)&&A.error(t),t instanceof r.du&&(t.statusCode===r.CN.NOT_FOUND||t.statusCode===r.CN.BAD_REQUEST)&&(e.errorStatusCode=r.CN.NOT_FOUND),e.loadingState!==c.Gu.IDLE&&(e.loadingState=c.Gu.REJECT)}}),reset(){e.loadingState=c.Gu.IDLE,e.meta=null,e.errorStatusCode=null,e.lastRelease=null,e.popularTracks=(0,a.pj)([]),e.similarArtists=(0,a.pj)([]),e.playlists=(0,a.pj)([])}})).views(e=>({get isLoading(){return e.loadingState===c.Gu.IDLE||e.loadingState===c.Gu.PENDING},get isPopularTracksExist(){return e.loadingState===c.Gu.IDLE||e.loadingState===c.Gu.PENDING||e.popularTracks.length>0},get popularAlbumsTitle(){var t,i;let s=null===(i=e.meta)||void 0===i?void 0:null===(t=i.artist)||void 0===t?void 0:t.counts;if(s&&s.albums>0&&s.albums<9&&s.compilations>0)return"Популярные альбомы и сборники";if(s&&s.albums>0)return"Популярные альбомы";return"Популярные сборники"},get isPopularAlbumsExists(){return e.loadingState===c.Gu.IDLE||e.loadingState===c.Gu.PENDING||e.popularAlbums.length>0},get isSimilarArtistsExist(){return e.loadingState===c.Gu.IDLE||e.loadingState===c.Gu.PENDING||e.similarArtists.length>0},get isPlaylistsExist(){return e.loadingState===c.Gu.IDLE||e.loadingState===c.Gu.PENDING||e.playlists&&e.playlists.length>0},get isLastReleaseExists(){return e.loadingState===c.Gu.IDLE||e.loadingState===c.Gu.PENDING||!!e.lastRelease},get isNotFound(){return e.loadingState===c.Gu.REJECT&&e.errorStatusCode===r.CN.NOT_FOUND}}))},39148:function(e,t,i){"use strict";i.r(t),i.d(t,{ArtistPage:function(){return y}});var s=i(8759),a=i(35338),r=i(33423),n=i(11769),o=i(99616),l=i(65244),u=i(7796),d=i(27287),c=i(71716),h=i(43400),E=i(23042),m=i(29152),A=i(20380),p=i(75434),g=i(93909),v=i(90271),P=i(27951),T=i(90779),N=i(42351),S=i.n(N);let y=(0,r.Pi)(e=>{var t,i,r;let{artistId:N}=e,y=(0,P.x5)({pageId:P.Rh.ARTIST,blockId:P.aU.ARTIST}),_=(0,P.uK)();_.get(P.Xt);let{artist:b,slides:f,experiments:V}=(0,P.oR)(),{formatMessage:L}=(0,l.Z)(),{ref:C,offsetY:R}=(0,d.e)(),I=(0,o.useMemo)(()=>{var e,t;return(0,P.XG)(null==b?void 0:null===(t=b.meta)||void 0===t?void 0:null===(e=t.artist)||void 0===e?void 0:e.averageColor)},[null==b?void 0:null===(i=b.meta)||void 0===i?void 0:null===(t=i.artist)||void 0===t?void 0:t.averageColor]),O=(0,o.useMemo)(()=>{if(void 0!==R){let e=R-17;return{"--average-color-background":I,transform:"translateY(".concat(R>=17?0:e,"px)"),opacity:1}}return{}},[R,!1,I]);(0,o.useEffect)(()=>()=>{b.id!==N&&b.reset()},[b,N]),b.loadingState===P.Gu.IDLE&&(0,o.use)(b.getData({artistId:N})),(0,P.NO)(b.loadingState===P.Gu.RESOLVE),b.isNotFound&&(0,n.notFound)();let w=(0,o.useMemo)(()=>{if(V.checkExperiment(P.pe.WebRewind2023,"on")&&f.artistItems.length>0)return"/rewind2023/artist/".concat(N)},[N,V,f.artistItems.length]),D=e=>({contextData:{type:u.Ak.Artist,meta:{id:Number(N)},from:y},queueParams:{index:b.popularTracks.findIndex(t=>t.id===e)},loadContextMeta:!0}),x=(0,o.useMemo)(()=>b.isLoading?(0,s.jsx)(E.KC,{className:S().header,coverRadius:"round"}):(0,s.jsx)(E.f3,{className:S().header,artistMeta:b.meta,coverLink:w,ref:C}),[b.isLoading,b.meta,w,C]);return(0,s.jsxs)(P.Lh,{pageId:P.Rh.ARTIST,children:[(0,s.jsx)("div",{className:S().averageColorBackground,style:O}),(0,s.jsxs)(c.t,{className:S().root,containerClassName:S().content,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.h,{}),x,(0,s.jsxs)("div",{className:S().recents,children:[b.isPopularTracksExist&&(0,s.jsxs)("div",{className:(0,a.W)(S().popularTracksBlock,{[S().popularTracksBlock_withLastRelease]:b.isLastReleaseExists}),children:[(0,s.jsx)(T.ti,{className:(0,a.W)(S().carouselContainer,S().important),title:L({id:"entity-names.popular-tracks"})}),(0,s.jsx)(T.RS,{className:(0,a.W)(S().popularTracksContainer,S().tracksContainer),isLoading:b.isLoading,variant:P.Lx.PLAYLIST,children:null===(r=b.popularTracks)||void 0===r?void 0:r.map((e,t)=>(0,s.jsx)(g.O2,{track:e,playContextParams:D(e.id),hasDuplicatesBefore:(0,v.BA)(b.popularTracks,e,t)},e.id))})]}),b.isLastReleaseExists&&(0,s.jsxs)("div",{className:S().lastReleaseBlock,children:[(0,s.jsx)(T.ti,{className:(0,a.W)(S().lastReleaseHeader,S().important),title:L({id:"entity-names.recently-release"})}),b.isLoading?(0,s.jsx)(T.hi,{className:S().lastReleaseCard}):(0,s.jsx)(m.rf,{className:S().lastReleaseCard,album:b.lastRelease})]})]}),(0,s.jsxs)("div",{className:S().carouselBlocks,children:[b.isPopularAlbumsExists&&(0,s.jsx)(m.wk,{headerClassName:S().carouselHeader,containerClassName:(0,a.W)(S().carouselContainer,S().important),albums:b.popularAlbums,isLoading:b.isLoading,title:b.popularAlbumsTitle}),b.isPlaylistsExist&&(0,s.jsx)(p.VD,{isLoading:b.isLoading,title:L({id:"entity-names.artist-playlist"}),playlists:b.playlists,containerClassName:(0,a.W)(S().carouselContainer,S().important),headerClassName:S().carouselHeader}),b.isSimilarArtistsExist&&(0,s.jsx)(T.HY,{title:L({id:"entity-names.similar-artists"}),isLoading:b.isLoading,headerClassName:S().carouselHeader,containerClassName:(0,a.W)(S().carouselContainer,S().important),children:b.similarArtists.map(e=>(0,s.jsx)(A.I,{artist:e,contentLinesCount:3},b.id))})]})]}),(0,s.jsx)(T.$_,{className:S().footer})]})]})})},47657:function(e,t,i){"use strict";i.r(t),i.d(t,{ArtistNotFoundPage:function(){return l}});var s=i(8759),a=i(33423),r=i(99616),n=i(2365),o=i(27951);let l=(0,a.Pi)(()=>{let{artist:e}=(0,o.oR)();return(0,r.useEffect)(()=>()=>{e.reset()},[e]),(0,s.jsx)(n.T,{})})},86644:function(e,t,i){"use strict";i.d(t,{gO:function(){return c},i$:function(){return s.PlaylistPage}});var s=i(52896);i(70305);var a=i(96555),r=i(96431),n=i(75434),o=i(93909),l=i(27951);let u=(e,t,i)=>{t.forEach(t=>{e.includes(t.id)&&(t={id:t.id,data:null,loadingState:i})})},d=a.V5.model("PlaylistItem",{id:a.V5.union(a.V5.string,a.V5.number),data:a.V5.maybeNull(o.mv),loadingState:a.V5.enumeration(Object.values(l.Gu))}),c=a.V5.model("Playlist",{meta:a.V5.maybeNull(n.nv),items:a.V5.array(d),errorStatusCode:a.V5.maybeNull(a.V5.number),loadingState:a.V5.enumeration(Object.values(l.Gu))}).actions(e=>({getTracks:(0,a.ls)(function*(t){let{trackIds:i}=t,{tracksResource:s,logger:r}=(0,a.dU)(e);try{var n,d;if(!(null===(n=e.meta)||void 0===n?void 0:n.uid)||!(null===(d=e.meta)||void 0===d?void 0:d.kind))return;u(i,e.items,l.Gu.PENDING);let t=yield s.getTracksMeta({trackIds:i});e.items=(0,a.pj)(e.items.map(e=>{let i=t.find(t=>String(null==t?void 0:t.id)===e.id);return i?{id:i.id,data:(0,o.sZ)(i),loadingState:l.Gu.RESOLVE}:e}))}catch(t){("string"==typeof t||t instanceof Error)&&r.error(t),u(i,e.items,l.Gu.REJECT)}})})).actions(e=>({updateData:(0,a.ls)(function*(t){if((null==t?void 0:t.error)==="not-found"){e.errorStatusCode=r.CN.NOT_FOUND,e.loadingState=l.Gu.REJECT;return}e.meta=(0,n.Q9)(t);let i=[];return e.items=(0,a.pj)(t.tracks.map((e,t)=>(t<10&&i.push(String(e.id)),{id:String(e.id),loadingState:l.Gu.IDLE}))),yield e.getTracks({trackIds:i})})})).actions(e=>({getPlaylistByUserIdAndKind:(0,a.ls)(function*(t){let{userId:i,playlistKind:s,resumeStream:n=!1,trackMetaType:o="music"}=t,{usersResource:u,logger:d}=(0,a.dU)(e);if(e.loadingState!==l.Gu.PENDING)try{e.loadingState=l.Gu.PENDING;let t=yield u.getPlaylistWithTracksIds({userId:i,playlistKind:s,resumeStream:n,trackMetaType:o});if("string"!=typeof t.playlistUuid){e.errorStatusCode=r.CN.NOT_FOUND,e.loadingState=l.Gu.REJECT;return}yield e.updateData(t),e.loadingState=l.Gu.RESOLVE}catch(t){("string"==typeof t||t instanceof Error)&&d.error(t),t instanceof r.du&&(t.statusCode===r.CN.NOT_FOUND||t.statusCode===r.CN.BAD_REQUEST)&&(e.errorStatusCode=r.CN.NOT_FOUND),e.loadingState=l.Gu.REJECT}}),getPlaylistByUuid:(0,a.ls)(function*(t){let{playlistUuid:i,richTracks:s=!1,resumeStream:n=!1}=t,{playlistResource:o,logger:u}=(0,a.dU)(e);if(e.loadingState!==l.Gu.PENDING)try{e.loadingState=l.Gu.PENDING;let t=yield o.getPlaylist({playlistUuid:i,resumeStream:n,richTracks:s});yield e.updateData(t),e.loadingState!==l.Gu.IDLE&&(e.loadingState=l.Gu.RESOLVE)}catch(t){("string"==typeof t||t instanceof Error)&&u.error(t),t instanceof r.du&&(t.statusCode===r.CN.NOT_FOUND||t.statusCode===r.CN.BAD_REQUEST)&&(e.errorStatusCode=r.CN.NOT_FOUND),e.loadingState!==l.Gu.IDLE&&(e.loadingState=l.Gu.REJECT)}}),reset(){e.meta=null,e.loadingState=l.Gu.IDLE,e.items=(0,a.pj)([]),e.errorStatusCode=null}})).views(e=>({get isNotFound(){return e.loadingState===l.Gu.REJECT&&e.errorStatusCode===r.CN.NOT_FOUND},get isLoading(){return e.loadingState===l.Gu.PENDING||e.loadingState===l.Gu.IDLE},get isDisabled(){var t;return e.loadingState===l.Gu.RESOLVE&&(0===e.items.length||!(null===(t=e.meta)||void 0===t?void 0:t.available))}}))},52896:function(e,t,i){"use strict";i.r(t),i.d(t,{PlaylistPage:function(){return g}});var s=i(8759),a=i(33423),r=i(11769),n=i(99616),o=i(7796),l=i(27287),u=i(43400),d=i(23042),c=i(93909),h=i(90271),E=i(27951),m=i(90779),A=i(21852),p=i.n(A);let g=(0,a.Pi)(e=>{var t;let{userId:i,kind:a,playlistUuid:A}=e,g=(0,E.x5)({pageId:E.Rh.PLAYLIST,blockId:E.aU.PLAYLIST}),v=(0,E.uK)();v.get(E.Xt);let{playlist:P}=(0,E.oR)(),T=(0,n.useMemo)(()=>{var e;return(0,E.XG)(null==P?void 0:null===(e=P.meta)||void 0===e?void 0:e.averageColor)},[null==P?void 0:null===(t=P.meta)||void 0===t?void 0:t.averageColor]),{ref:N,offsetY:S}=(0,l.e)(),y=(0,n.useMemo)(()=>{if(void 0!==S){let e=S-17;return{"--average-color-background":T,transform:"translateY(".concat(S>=17?0:e,"px)"),opacity:1}}return{}},[S,!1,T]);(0,n.useEffect)(()=>()=>{(P.uid!==i||P.kind!==a||P.uuid!==A)&&P.reset()},[P,i,a,A]),P.loadingState===E.Gu.IDLE&&("string"==typeof A?(0,n.use)(P.getPlaylistByUuid({playlistUuid:A})):(0,n.use)(P.getPlaylistByUserIdAndKind({userId:i,playlistKind:a}))),(0,E.NO)(P.loadingState===E.Gu.RESOLVE),P.isNotFound&&(0,r.notFound)();let _=(0,n.useMemo)(()=>P.isLoading?(0,s.jsx)(d.KC,{className:p().header}):(0,s.jsx)(d.Vm,{playlist:P.meta,isDisabled:P.isDisabled,className:p().header,ref:N}),[P.isDisabled,P.isLoading,P.meta,N]),b=(0,n.useMemo)(()=>({Header:()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.h,{}),_]}),Footer:()=>(0,s.jsx)(m.$_,{className:p().footer})}),[_]),f=(0,n.useCallback)(e=>{let t=[];for(let i=e.startIndex;i<=e.endIndex;i++){let e=P.items[i];(null==e?void 0:e.loadingState)===E.Gu.IDLE&&t.push(e.id)}t.length&&P.getTracks({trackIds:t})},[P]);return(0,s.jsxs)(E.Lh,{pageId:E.Rh.PLAYLIST,children:[(0,s.jsx)("div",{className:p().averageColorBackground,style:y}),(0,s.jsx)(m.Wv,{className:p().root,listClassName:p().content,customComponents:b,totalCount:P.items.length,itemContentCallback:e=>{var t;let i=null==P?void 0:null===(t=P.items)||void 0===t?void 0:t[e];return i&&(null==i?void 0:i.data)?(0,s.jsx)(c.O2,{track:i.data,hasDuplicatesBefore:(0,h.BA)(null==P?void 0:P.items,i.data,e),playContextParams:{contextData:{type:o.Ak.Playlist,meta:{id:P.meta.uuid},from:g},queueParams:{index:e},loadContextMeta:!0}}):(0,s.jsx)(m.DX,{className:p().shimmerItem,variant:E.Lx.PLAYLIST})},onGetDataByRange:f,debounceDurationInMs:300,initialItemCount:P.items.length})]})})},70305:function(e,t,i){"use strict";i.r(t),i.d(t,{PlaylistNotFoundPage:function(){return n}});var s=i(8759),a=i(33423),r=i(2365);let n=(0,a.Pi)(()=>(0,s.jsx)(r.T,{}))},80930:function(e,t,i){"use strict";i.d(t,{$:function(){return l}});var s,a,r=i(28307),n=i(93991);(s=a||(a={})).WEB="YandexMusicWebNext",s.DESKTOP="YandexMusicDesktopApp";let o=(e,t)=>"".concat(e,"/").concat(t),l=()=>{{let e="".concat(a.DESKTOP).concat((0,n.y)((0,r.X)()));return o(e,"1.0")}}},93991:function(e,t,i){"use strict";i.d(t,{y:function(){return a}});var s=i(38060);let a=e=>{switch(e){case"win32":return s.B.WINDOWS;case"darwin":return s.B.MACOS;case"linux":return s.B.LINUX}return null}},38060:function(e,t,i){"use strict";var s,a;i.d(t,{B:function(){return s}}),(a=s||(s={})).WINDOWS="Windows",a.MACOS="MacOS",a.LINUX="Linux"},83573:function(){},12576:function(e){e.exports={root:"NotificationUpdate_root__hpSQi",important:"NotificationUpdate_important___0WHj",text:"NotificationUpdate_text__YylYD",button:"NotificationUpdate_button__F3O16",message:"NotificationUpdate_message__rLYpW"}},99750:function(e){e.exports={root:"TitleBar_root__QjdOZ",button:"TitleBar_button__9MptL",closeButton:"TitleBar_closeButton__Epxh7"}},19035:function(e){e.exports={root:"SonataControlsDesktop_root__oluUH",sonataButtons:"SonataControlsDesktop_sonataButtons__ux0qT",sonataButton:"SonataControlsDesktop_sonataButton__FTykq",playButtonIcon:"SonataControlsDesktop_playButtonIcon__BgNUF"}},20180:function(e){e.exports={root:"Album_root__Q0lER",important:"Album_important__BgPFO",averageColorBackground:"Album_averageColorBackground__Azuso",header:"Album_header__AooR_",content:"Album_content__lB0Uw",footerContainer:"Album_footerContainer__FmHR2",carousel:"Album_carousel__XJnod",carouselContainer:"Album_carouselContainer__7NJck",textItem:"Album_textItem__fRm1d",text:"Album_text__qHJw_",shimmerItem:"Album_shimmerItem__Qbpj3",footer:"Album_footer__9zwOl"}},42351:function(e){e.exports={root:"Artist_root__K_jRw",averageColorBackground:"Artist_averageColorBackground__5iOpY",header:"Artist_header__I7G_m",content:"Artist_content__B8c8f",recents:"Artist_recents__Oj3Y3",popularTracksBlock:"Artist_popularTracksBlock__ETF5y",popularTracksBlock_withLastRelease:"Artist_popularTracksBlock_withLastRelease__0aHnG",popularTracksContainer:"Artist_popularTracksContainer__Yc6SW",tracksContainer:"Artist_tracksContainer__OPqVm",lastReleaseBlock:"Artist_lastReleaseBlock__bWGDw",carouselHeader:"Artist_carouselHeader__lVeWu",carouselContainer:"Artist_carouselContainer__8v2E_",important:"Artist_important__M0WDR",popularTracks:"Artist_popularTracks__IGPnd",lastReleaseHeader:"Artist_lastReleaseHeader__h30bq",lastReleaseCard:"Artist_lastReleaseCard__6eY78",carouselBlocks:"Artist_carouselBlocks__eQGOp",footer:"Artist_footer__B_78X"}},21852:function(e){e.exports={root:"Playlist_root__soQjV",averageColorBackground:"Playlist_averageColorBackground__sTYXX",header:"Playlist_header__AFLVW",content:"Playlist_content__jK_zQ",shimmerItem:"Playlist_shimmerItem__D5COd",footer:"Playlist_footer__FT8cm"}},81643:function(e,t,i){"use strict";i.d(t,{d:function(){return a}});var s=i(59274);class a extends s.e{statusCode;constructor(e,t){super(e,{code:"E_HTTP_CLIENT_NON_2XX_3XX_RESPONSE",cause:t.cause}),this.statusCode=t.statusCode,Object.setPrototypeOf(this,a.prototype)}}},59274:function(e,t,i){"use strict";i.d(t,{e:function(){return a}});var s=i(83993);class a extends s.y{name="HttpException";constructor(e="Http Client error",{code:t="E_HTTP_CLIENT",...i}={}){super(e,{code:t,...i}),Object.setPrototypeOf(this,a.prototype)}}},96431:function(e,t,i){"use strict";i.d(t,{du:function(){return r.d},CN:function(){return a}}),(s=a||(a={}))[s.NOT_FOUND=404]="NOT_FOUND",s[s.BAD_REQUEST=400]="BAD_REQUEST";var s,a,r=i(81643)}},function(e){e.O(0,[2498,7873,337,6686,8316,8628,6499,5932,3677,8616,3217,7951,2565,7243,9107,4721,7747,8631,4657,9217,9580,3743,4328,4109,4025,4164,1744],function(){return e(e.s=44627)}),_N_E=e.O()}]);
//# sourceMappingURL=layout-fda09d32cfd94f63.js.map