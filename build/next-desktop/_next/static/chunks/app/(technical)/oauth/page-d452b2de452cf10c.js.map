{"version":3,"file":"static/chunks/app/(technical)/oauth/page-d452b2de452cf10c.js","mappings":"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","sources":["webpack://_N_E/?7bfe","webpack://_N_E/./src/domain/pages/oauth/lib/parseHash.ts","webpack://_N_E/./src/domain/pages/oauth/ui/OAuth.tsx","webpack://_N_E/./src/domain/shared/ui/Shimmer/TabShimmer/TabShimmer.tsx","webpack://_N_E/./src/domain/shared/ui/Shimmer/TextShimmer/TextShimmer.tsx","webpack://_N_E/./src/domain/shared/ui/Shimmer/GridShimmer/GridShimmer.tsx","webpack://_N_E/./src/domain/shared/ui/Tab/Tab.tsx","webpack://_N_E/./src/domain/shared/ui/TabCarousel/TabCarousel.tsx","webpack://_N_E/./src/domain/shared/ui/index.ts","webpack://_N_E/<anon>"],"sourcesContent":["import(/* webpackMode: \"eager\" */ \"/Users/andrey-volkov/projects/arcadia/music/frontend/musfront/services/music/src/domain/pages/oauth/ui/OAuth.tsx\")","export const parseHash = (hash: string): Record<string, string> => {\n    if (hash.startsWith('#')) {\n        hash = hash.slice(1);\n    }\n\n    return hash.split('&').reduce((acc: Record<string, string>, pair: string) => {\n        const [key = '', value = ''] = pair.split('=');\n        acc[key] = value;\n        return acc;\n    }, {});\n};\n","'use client';\n\nimport { useSearchParams, redirect } from 'next/navigation.js';\nimport { ReactNode, useEffect } from 'react';\n\nimport { BaseException } from '@yandex-music-int/exception';\n\nimport { useContainer, CONTAINER_AUTHORIZATION, CONTAINER_LOGGER_TOKEN, useUrl } from '@/shared/lib/index.js';\nimport { MainSuspenseLoader } from '@/shared/ui/index.js';\n\nimport { parseHash } from '../lib/parseHash.js';\n\nexport const OAuthPage = (): ReactNode => {\n    const container = useContainer();\n    const authorization = container.get(CONTAINER_AUTHORIZATION);\n    const logger = container.get(CONTAINER_LOGGER_TOKEN);\n    const searchParams = useSearchParams();\n    const { origin } = useUrl();\n    const redirectPath = searchParams.get('redirectUri') || '';\n    const redirectUri = `${origin}/${redirectPath}`;\n\n    useEffect(() => {\n        const hash = window.location.hash;\n        window.location.hash = '';\n\n        try {\n            if (hash.length) {\n                const hashParsed = parseHash(hash);\n\n                if (hashParsed.expires_in && hashParsed.access_token && hashParsed.state) {\n                    authorization.setToken({\n                        expiresIn: parseInt(hashParsed.expires_in, 10),\n                        token: hashParsed.access_token,\n                        state: hashParsed.state\n                    });\n                } else {\n                    throw new BaseException('No OAuth-token in URL returned by OAuth-service', {\n                        code: 'E_OAUTH_PAGE_NO_TOKEN'\n                    });\n                }\n            }\n        } catch (error) {\n            logger.info(error as Error);\n        }\n\n        redirect(redirectUri);\n    }, [redirectUri, authorization, logger]);\n\n    return <MainSuspenseLoader />;\n};\n","import { clsx } from 'clsx';\nimport { ReactElement } from 'react';\n\nimport { Shimmer } from '@yandex-music-int/sol/components/Shimmer';\n\nimport styles from './TabShimmer.module.scss';\n\nexport const TabShimmerWithCovers = (): ReactElement => {\n    return (\n        <div className={clsx(styles.root, styles.root_withCovers)}>\n            <div className={styles.covers}>\n                <Shimmer width={36} className={styles.cover} radius=\"round\" />\n                <Shimmer width={36} className={styles.cover} radius=\"round\" />\n            </div>\n            <div className={styles.lines}>\n                <Shimmer width={98} className={styles.title} />\n                <Shimmer width={85} className={styles.subtitle} />\n            </div>\n        </div>\n    );\n};\n\nexport const TabShimmer = (): ReactElement => {\n    return (\n        <div className={styles.root}>\n            <div className={styles.lines}>\n                <Shimmer width={78} className={styles.title} />\n            </div>\n        </div>\n    );\n};\n","import { clsx } from 'clsx';\nimport { ReactElement } from 'react';\n\nimport { Shimmer } from '@yandex-music-int/sol/components/Shimmer';\n\nimport { WithClassName } from '@/shared/lib/index.js';\n\nimport styles from './TextShimmer.module.scss';\n\ninterface Props extends WithClassName {}\n\nexport const TextShimmer = ({ className }: Props): ReactElement => {\n    return (\n        <div className={clsx(styles.root, className)}>\n            <Shimmer className={styles.text} radius=\"s\" />\n        </div>\n    );\n};\n","import { ReactElement } from 'react';\n\nimport { WithAria } from '../../../lib/index.js';\nimport { EntityCardShimmer } from '../EntityCardShimmer/EntityCardShimmer.js';\n\ninterface Props extends WithAria {\n    itemClassName: string;\n    count?: number;\n    round?: boolean;\n    centered?: boolean;\n}\n\nexport const GridShimmer = ({\n    'aria-label': ariaLabel,\n    itemClassName,\n    round,\n    centered,\n    count = 10\n}: Props): ReactElement[] => {\n    const items = Array.from(Array(count).keys());\n\n    return items.map((index: number) => (\n        <EntityCardShimmer\n            key={index}\n            className={itemClassName}\n            round={round}\n            centered={centered}\n            aria-label={ariaLabel}\n        />\n    ));\n};\n","import { clsx } from 'clsx';\nimport { ReactElement } from 'react';\n\nimport { Image } from '@yandex-music-int/sol/components/Image';\nimport { type TabProps as BaseTabProps, Tab as BaseTab } from '@yandex-music-int/sol/components/Tabs';\nimport { Caption } from '@yandex-music-int/sol/components/Typography';\n\nimport { WithClassName } from '../../lib/index.js';\n\nimport styles from './Tab.module.scss';\n\ninterface Props extends WithClassName, BaseTabProps {\n    value: number;\n    title?: string;\n    subtitle?: string;\n    covers?: string[];\n    withCovers?: boolean;\n}\n\nexport const Tab = ({ className, value, title, subtitle, covers, withCovers, ...props }: Props): ReactElement => {\n    return (\n        <BaseTab\n            value={value}\n            className={clsx(\n                styles.root,\n                {\n                    [styles.tab_size_s]: !subtitle && covers?.length,\n                    [styles.tab_size_m]: !subtitle && !covers?.length,\n                    [styles.tab_size_l]: subtitle && covers?.length === 1,\n                    [styles.tab_withCovers]: withCovers\n                },\n                className\n            )}\n            {...props}\n        >\n            {Boolean(covers?.length) && (\n                <span className={styles.covers}>\n                    {covers?.map((uri: string) => (\n                        <Image className={styles.image} key={uri} src={uri} fit=\"cover\" size={50} withAvatarReplace />\n                    ))}\n                </span>\n            )}\n            <span className={styles.description}>\n                <Caption className={styles.title} variant=\"div\" type=\"controls\" size=\"m\" weight=\"bold\" lineClamp={1}>\n                    {title}\n                </Caption>\n                {Boolean(subtitle) && (\n                    <Caption\n                        className={styles.subtitle}\n                        variant=\"div\"\n                        type=\"controls\"\n                        size=\"s\"\n                        weight=\"medium\"\n                        lineClamp={1}\n                    >\n                        {subtitle}\n                    </Caption>\n                )}\n            </span>\n        </BaseTab>\n    );\n};\n","import { clsx } from 'clsx';\nimport { forwardRef, ReactElement, Ref } from 'react';\n\nimport { TabProps, Tabs, TabsState } from '@yandex-music-int/sol/components/Tabs';\n\nimport { WithAria, WithClassName } from '../../lib/index.js';\nimport { TabShimmer, TabShimmerWithCovers } from '../Shimmer/TabShimmer/TabShimmer.js';\n\nimport styles from './TabCarousel.module.scss';\n\ninterface Props extends TabsState, WithClassName, WithAria {\n    shimmer?: ReactElement;\n    isLoading?: boolean;\n    children?: Array<ReactElement<TabProps>>;\n    forwardRef?: Ref<HTMLDivElement>;\n}\n\nconst TabCarouselComponent = ({\n    value,\n    shimmer,\n    children,\n    isLoading,\n    onTabChange,\n    className,\n    forwardRef: ref,\n    ...props\n}: Props): ReactElement => {\n    if (isLoading && shimmer) {\n        return shimmer;\n    }\n\n    return (\n        <Tabs className={clsx(styles.root, className)} value={value} onTabChange={onTabChange} ref={ref} {...props}>\n            {children}\n        </Tabs>\n    );\n};\n\ninterface ShimmerProps extends WithClassName {}\n\nexport const TabCarouselShimmer = ({ className }: ShimmerProps): ReactElement => {\n    return (\n        <div className={clsx(styles.root, className)}>\n            {Array.from({ length: 2 }, (value: unknown, index: number) => {\n                return <TabShimmer key={index} />;\n            })}\n        </div>\n    );\n};\n\nexport const TabCarouselShimmerWithCovers = ({ className }: ShimmerProps): ReactElement => {\n    return (\n        <div className={clsx(styles.root, className)}>\n            {Array.from({ length: 2 }, (value: unknown, index: number) => {\n                return <TabShimmerWithCovers key={index} />;\n            })}\n        </div>\n    );\n};\n\nexport const TabCarousel = forwardRef<HTMLDivElement, Props>(\n    ({ ...props }: Props, ref: Ref<HTMLDivElement>): ReactElement => (\n        <TabCarouselComponent forwardRef={ref} {...props} />\n    )\n);\n","export { BlockHeader } from './BlockHeader/BlockHeader.js';\nexport { CardLikes } from './CardLikes/CardLikes.js';\nexport { CarouselBlock } from './CarouselBlock/CarouselBlock.js';\nexport { CarouselControls } from './CarouselControls/CarouselControls.js';\nexport { DevPanel } from './DevPanel/DevPanel.js';\nexport { FutureFeature } from './FutureFeature/FutureFeature.js';\nexport { useFuture } from './DevPanel/useFutureFeatures.js';\nexport { DislikeButton } from './DislikeButton/DislikeButton.js';\nexport { LikeButton } from './LikeButton/LikeButton.js';\nexport { Link } from './Link/Link.js';\nexport { MainSuspenseLoader } from './MainSuspenseLoader/MainSuspenseLoader.js';\nexport { PlayButton } from './PlayButton/PlayButton.js';\nexport { CarouselShimmer } from './Shimmer/CarouselShimmer/CarouselShimmer.js';\nexport { EntityCardShimmer } from './Shimmer/EntityCardShimmer/EntityCardShimmer.js';\nexport { TabShimmer, TabShimmerWithCovers } from './Shimmer/TabShimmer/TabShimmer.js';\nexport { TextShimmer } from './Shimmer/TextShimmer/TextShimmer.js';\nexport { TrackShimmer } from './Shimmer/TrackShimmer/TrackShimmer.js';\nexport { TracksBlock } from './TracksBlock/TracksBlock.js';\nexport { TracksList } from './TracksList/TracksList.js';\nexport { VirtualScroll } from './VirtualScroll/VirtualScroll.js';\nexport { GridShimmer } from './Shimmer/GridShimmer/GridShimmer.js';\nexport { Tab } from './Tab/Tab.js';\nexport { TabCarousel, TabCarouselShimmerWithCovers, TabCarouselShimmer } from './TabCarousel/TabCarousel.js';\nexport { ErrorBoundary } from './ErrorBoundary/ErrorBoundary.js';\nexport { Footer } from './Footer/Footer.js';\nexport { RumScript } from './RumScript/RumScript.js';\nexport { ErrorBoosterScript } from './ErrorBoosterScript/ErrorBoosterScript.js';\nexport { MetrikaScript } from './MetrikaScript/MetrikaScript.js';\nexport { BaseNotification } from './BaseNotification/BaseNotification.js';\nexport { BaseNotificationLike } from './BaseNotification/BaseNotificationLike/BaseNotificationLike.js';\nexport { BaseNotificationError } from './BaseNotification/BaseNotificationError/BaseNotificationError.js';\n"],"names":["Promise","resolve","then","__webpack_require__","bind","parseHash","hash","startsWith","slice","split","reduce","acc","pair","key","value","OAuthPage","container","useContainer","authorization","get","CONTAINER_AUTHORIZATION","logger","CONTAINER_LOGGER_TOKEN","searchParams","useSearchParams","origin","useUrl","redirectPath","redirectUri","concat","useEffect","window","location","length","hashParsed","expires_in","access_token","state","setToken","expiresIn","parseInt","token","BaseException","code","error","info","redirect","jsx_runtime","jsx","MainSuspenseLoader","TabShimmerWithCovers","jsxs","div","className","clsx","styles","Shimmer","width","radius","TextShimmer","param","GridShimmer","ariaLabel","itemClassName","round","centered","count","items","Array","from","keys","map","EntityCardShimmer","aria-label","index","Tab","title","subtitle","covers","withCovers","props","BaseTab","Boolean","span","Image","src","uri","fit","size","withAvatarReplace","Caption","variant","type","weight","lineClamp","TabCarouselComponent","shimmer","children","isLoading","onTabChange","forwardRef","ref","Tabs","TabCarouselShimmerWithCovers","TabCarousel"],"sourceRoot":""}